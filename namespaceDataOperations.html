<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Semester Project Liam Curtis: DataOperations Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Semester Project Liam Curtis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DataOperations Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Namespace containing all data generation, storage, and loading operations.  
<a href="namespaceDataOperations.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af2301cb80271dc293823b47300057412"><td class="memItemLeft" align="right" valign="top">std::vector&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#af2301cb80271dc293823b47300057412">numberToBoolVector</a> (unsigned int number, int bits)</td></tr>
<tr class="memdesc:af2301cb80271dc293823b47300057412"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an unsigned integer to a boolean vector, with 1st index being the ones place.  <a href="namespaceDataOperations.html#af2301cb80271dc293823b47300057412">More...</a><br /></td></tr>
<tr class="separator:af2301cb80271dc293823b47300057412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85bfa90798984f1b432045392252da6f"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a85bfa90798984f1b432045392252da6f">sampleWithoutReplacement</a> (int min, int max, int n, std::mt19937 &amp;rng)</td></tr>
<tr class="memdesc:a85bfa90798984f1b432045392252da6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Samples n unique integers from [min, max] without replacement.  <a href="namespaceDataOperations.html#a85bfa90798984f1b432045392252da6f">More...</a><br /></td></tr>
<tr class="separator:a85bfa90798984f1b432045392252da6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab573a3ecdbe060d4a5b1a6b8d6d4c545"><td class="memItemLeft" align="right" valign="top"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#ab573a3ecdbe060d4a5b1a6b8d6d4c545">flipVectorEntry</a> (<a class="el" href="structParametrizationEntry.html">ParametrizationEntry</a> &amp;param_entry, std::pair&lt; double, int &gt; &amp;flip_params, std::mt19937 &amp;rng)</td></tr>
<tr class="memdesc:ab573a3ecdbe060d4a5b1a6b8d6d4c545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates flipped variations of a parametrization entry.  <a href="namespaceDataOperations.html#ab573a3ecdbe060d4a5b1a6b8d6d4c545">More...</a><br /></td></tr>
<tr class="separator:ab573a3ecdbe060d4a5b1a6b8d6d4c545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008bad02f9fea01df05e471448de212d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a008bad02f9fea01df05e471448de212d">generateRotationAngles</a> (double rotation_granularity, double random_proportion, std::mt19937 &amp;rng)</td></tr>
<tr class="memdesc:a008bad02f9fea01df05e471448de212d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates angles for rotating parametrizations.  <a href="namespaceDataOperations.html#a008bad02f9fea01df05e471448de212d">More...</a><br /></td></tr>
<tr class="separator:a008bad02f9fea01df05e471448de212d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27523c442a94bea27ec8411e1e1499af"><td class="memItemLeft" align="right" valign="top">Eigen::Vector2d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a> (const Eigen::Vector2d &amp;point, const Eigen::Vector2d &amp;reference, double angle_degrees)</td></tr>
<tr class="memdesc:a27523c442a94bea27ec8411e1e1499af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotates a 2D point around a reference point *.  <a href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">More...</a><br /></td></tr>
<tr class="separator:a27523c442a94bea27ec8411e1e1499af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab08b3135bf6da6012a8c83633d9e4b73"><td class="memItemLeft" align="right" valign="top">Eigen::Vector2d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#ab08b3135bf6da6012a8c83633d9e4b73">findCenter</a> (const <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;params)</td></tr>
<tr class="memdesc:ab08b3135bf6da6012a8c83633d9e4b73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the geometric centroid of a mesh parametrization.  <a href="namespaceDataOperations.html#ab08b3135bf6da6012a8c83633d9e4b73">More...</a><br /></td></tr>
<tr class="separator:ab08b3135bf6da6012a8c83633d9e4b73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83786aa2f7e93613972c7fb0a171970"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#ac83786aa2f7e93613972c7fb0a171970">rotateParametrization</a> (const <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;params, const std::pair&lt; double, double &gt; &amp;rotation_params, std::mt19937 &amp;rng)</td></tr>
<tr class="memdesc:ac83786aa2f7e93613972c7fb0a171970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates rotated variations of a <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> object.  <a href="namespaceDataOperations.html#ac83786aa2f7e93613972c7fb0a171970">More...</a><br /></td></tr>
<tr class="separator:ac83786aa2f7e93613972c7fb0a171970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8324874abd3386880a853753a310f494"><td class="memItemLeft" align="right" valign="top"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a8324874abd3386880a853753a310f494">rotateParametrization</a> (<a class="el" href="structParametrizationEntry.html">ParametrizationEntry</a> &amp;param_entry, std::pair&lt; double, double &gt; &amp;rotation_params, std::mt19937 &amp;rng)</td></tr>
<tr class="memdesc:a8324874abd3386880a853753a310f494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates rotated variations of a <a class="el" href="structParametrizationEntry.html">ParametrizationEntry</a> object.  <a href="namespaceDataOperations.html#a8324874abd3386880a853753a310f494">More...</a><br /></td></tr>
<tr class="separator:a8324874abd3386880a853753a310f494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0cdeb3fcb186c94a588a55742c3fe2f"><td class="memItemLeft" align="right" valign="top">std::tuple&lt; Eigen::MatrixXd, Eigen::MatrixXd, Eigen::MatrixXd, Eigen::MatrixXd &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#ae0cdeb3fcb186c94a588a55742c3fe2f">generateMidPointsAndVectors</a> (const Eigen::VectorXd &amp;side_lengths)</td></tr>
<tr class="memdesc:ae0cdeb3fcb186c94a588a55742c3fe2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates midpoints and vectors for multi-branch construction.  <a href="namespaceDataOperations.html#ae0cdeb3fcb186c94a588a55742c3fe2f">More...</a><br /></td></tr>
<tr class="separator:ae0cdeb3fcb186c94a588a55742c3fe2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a804a039949519937d4e204b181bb3109"><td class="memItemLeft" align="right" valign="top">Eigen::MatrixXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a804a039949519937d4e204b181bb3109">singleBranchDisplacements</a> (<a class="el" href="structDisplacementGenerators.html">DisplacementGenerators</a> &amp;param_gens)</td></tr>
<tr class="memdesc:a804a039949519937d4e204b181bb3109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates displacement boundary conditions for a single branch parametrization.  <a href="namespaceDataOperations.html#a804a039949519937d4e204b181bb3109">More...</a><br /></td></tr>
<tr class="separator:a804a039949519937d4e204b181bb3109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0918c3d7ed909a9613b34d36f6f44d2"><td class="memItemLeft" align="right" valign="top">Eigen::MatrixXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#ac0918c3d7ed909a9613b34d36f6f44d2">multiBranchDisplacements</a> (int num, <a class="el" href="structDisplacementGenerators.html">DisplacementGenerators</a> &amp;param_gens)</td></tr>
<tr class="memdesc:ac0918c3d7ed909a9613b34d36f6f44d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates displacement boundary conditions for a multi-branch parametrization.  <a href="namespaceDataOperations.html#ac0918c3d7ed909a9613b34d36f6f44d2">More...</a><br /></td></tr>
<tr class="separator:ac0918c3d7ed909a9613b34d36f6f44d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa89de93a8e7923d122feb9003b981469"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#aa89de93a8e7923d122feb9003b981469">generatePeturbedParametrizations</a> (<a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;base_param, <a class="el" href="structPerturbationParams.html">PerturbationParams</a> &amp;perturb_params)</td></tr>
<tr class="memdesc:aa89de93a8e7923d122feb9003b981469"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates perturbed variations of a base parametrization.  <a href="namespaceDataOperations.html#aa89de93a8e7923d122feb9003b981469">More...</a><br /></td></tr>
<tr class="separator:aa89de93a8e7923d122feb9003b981469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64cd3643680cdedef8e9696f57fdf528"><td class="memItemLeft" align="right" valign="top"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a64cd3643680cdedef8e9696f57fdf528">generateDisplacementBCs</a> (<a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;base_param, <a class="el" href="structDisplacementParams.html">DisplacementParams</a> &amp;params)</td></tr>
<tr class="memdesc:a64cd3643680cdedef8e9696f57fdf528"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates displacement boundary conditions for a parametrization.  <a href="namespaceDataOperations.html#a64cd3643680cdedef8e9696f57fdf528">More...</a><br /></td></tr>
<tr class="separator:a64cd3643680cdedef8e9696f57fdf528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a728214b2b3f055905c5ddf6cba3e9df3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a728214b2b3f055905c5ddf6cba3e9df3">generateSingleBranchParametrization</a> (int num, double width, double length)</td></tr>
<tr class="memdesc:a728214b2b3f055905c5ddf6cba3e9df3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a single branch parametrization.  <a href="namespaceDataOperations.html#a728214b2b3f055905c5ddf6cba3e9df3">More...</a><br /></td></tr>
<tr class="separator:a728214b2b3f055905c5ddf6cba3e9df3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad852ba572234ef023dd0ccea7f279599"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#ad852ba572234ef023dd0ccea7f279599">generateMultiBranchParametrization</a> (int num, const Eigen::VectorXd &amp;widths, const Eigen::VectorXd &amp;lengths)</td></tr>
<tr class="memdesc:ad852ba572234ef023dd0ccea7f279599"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a multi-branch parametrization.  <a href="namespaceDataOperations.html#ad852ba572234ef023dd0ccea7f279599">More...</a><br /></td></tr>
<tr class="separator:ad852ba572234ef023dd0ccea7f279599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334d6c3874f7171cfef100805f2287f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a334d6c3874f7171cfef100805f2287f8">generateParametrizationDataSet</a> (<a class="el" href="structGenerationParams.html">GenerationParams</a> &amp;gen_params, bool verbose=false)</td></tr>
<tr class="memdesc:a334d6c3874f7171cfef100805f2287f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a complete parametrization dataset, according to Algorithm 1 of the report.  <a href="namespaceDataOperations.html#a334d6c3874f7171cfef100805f2287f8">More...</a><br /></td></tr>
<tr class="separator:a334d6c3874f7171cfef100805f2287f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e882411963c7de27766e4f4d1053328"><td class="memItemLeft" align="right" valign="top"><a class="el" href="data__operations_8h.html#a0594e31d7c25e933185cba6910c841c1">PointDataSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a4e882411963c7de27766e4f4d1053328">parametrizationToPoint</a> (<a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> &amp;param_dataset)</td></tr>
<tr class="memdesc:a4e882411963c7de27766e4f4d1053328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a parametrization dataset containing <a class="el" href="structParametrizationEntry.html">ParametrizationEntry</a> objects to a dataset containing <a class="el" href="structPointEntry.html">PointEntry</a>.  <a href="namespaceDataOperations.html#a4e882411963c7de27766e4f4d1053328">More...</a><br /></td></tr>
<tr class="separator:a4e882411963c7de27766e4f4d1053328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c39a2013ae3af6acd461f89c2115687"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a6c39a2013ae3af6acd461f89c2115687">parametrizationToPoint</a> (const std::vector&lt; <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &gt; &amp;param_vector)</td></tr>
<tr class="memdesc:a6c39a2013ae3af6acd461f89c2115687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts vector of <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> objects to a vector of <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> objects.  <a href="namespaceDataOperations.html#a6c39a2013ae3af6acd461f89c2115687">More...</a><br /></td></tr>
<tr class="separator:a6c39a2013ae3af6acd461f89c2115687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9374405c98c83ee87c23302191aaa3ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a9374405c98c83ee87c23302191aaa3ed">saveMeshParametrizationData</a> (std::ofstream &amp;file, const <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;param)</td></tr>
<tr class="memdesc:a9374405c98c83ee87c23302191aaa3ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves a <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> object to a binary file.  <a href="namespaceDataOperations.html#a9374405c98c83ee87c23302191aaa3ed">More...</a><br /></td></tr>
<tr class="separator:a9374405c98c83ee87c23302191aaa3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43e0dfb86f9e053b13da2df705508be0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a43e0dfb86f9e053b13da2df705508be0">loadMeshParametrizationData</a> (std::ifstream &amp;file)</td></tr>
<tr class="memdesc:a43e0dfb86f9e053b13da2df705508be0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> object from a binary file.  <a href="namespaceDataOperations.html#a43e0dfb86f9e053b13da2df705508be0">More...</a><br /></td></tr>
<tr class="separator:a43e0dfb86f9e053b13da2df705508be0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa1d02bbafe5dac9ae6d2bc10cb6e0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a1aa1d02bbafe5dac9ae6d2bc10cb6e0b">saveParametrizationPoints</a> (std::ofstream &amp;file, const <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> &amp;points)</td></tr>
<tr class="memdesc:a1aa1d02bbafe5dac9ae6d2bc10cb6e0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves a <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> object to a binary file.  <a href="namespaceDataOperations.html#a1aa1d02bbafe5dac9ae6d2bc10cb6e0b">More...</a><br /></td></tr>
<tr class="separator:a1aa1d02bbafe5dac9ae6d2bc10cb6e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1007d706df9b1ec0242b8c0e451e083"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#af1007d706df9b1ec0242b8c0e451e083">loadParametrizationPoints</a> (std::ifstream &amp;file)</td></tr>
<tr class="memdesc:af1007d706df9b1ec0242b8c0e451e083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> object from a binary file.  <a href="namespaceDataOperations.html#af1007d706df9b1ec0242b8c0e451e083">More...</a><br /></td></tr>
<tr class="separator:af1007d706df9b1ec0242b8c0e451e083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bbd993d86cb3d3360aaf707ad75a881"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a8bbd993d86cb3d3360aaf707ad75a881">saveDataSet</a> (const <a class="el" href="data__operations_8h.html#a6a3a07638e11f8b744844f1933ff0f0c">DataSet</a> &amp;data_set, const std::string &amp;file_name)</td></tr>
<tr class="memdesc:a8bbd993d86cb3d3360aaf707ad75a881"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves a dataset of either type to a binary file.  <a href="namespaceDataOperations.html#a8bbd993d86cb3d3360aaf707ad75a881">More...</a><br /></td></tr>
<tr class="separator:a8bbd993d86cb3d3360aaf707ad75a881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f31af133e7d20282f04e1a2398b8fd1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="data__operations_8h.html#a6a3a07638e11f8b744844f1933ff0f0c">DataSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceDataOperations.html#a0f31af133e7d20282f04e1a2398b8fd1">loadDataSet</a> (const std::string &amp;file_name)</td></tr>
<tr class="memdesc:a0f31af133e7d20282f04e1a2398b8fd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a dataset from a binary file.  <a href="namespaceDataOperations.html#a0f31af133e7d20282f04e1a2398b8fd1">More...</a><br /></td></tr>
<tr class="separator:a0f31af133e7d20282f04e1a2398b8fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Namespace containing all data generation, storage, and loading operations. </p>
<p>Provides functionality for generating, transforming, saving, and loading parametrization datasets used in neural network training, and can then convert parametrization datasets to point datasets </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab08b3135bf6da6012a8c83633d9e4b73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab08b3135bf6da6012a8c83633d9e4b73">&#9670;&nbsp;</a></span>findCenter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Vector2d DataOperations::findCenter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the geometric centroid of a mesh parametrization. </p>
<p>For a single-branch parametrization, return the middle terminal, and for a multi-branch parametrization, return the geometric centroid</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>Mesh parametrization data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Center point as 2D vector </dd></dl>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                                                              {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// If the amount of branches is 1, we simply return the middle terminal</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (params.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a> == 1) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span> Eigen::Vector2d(params.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(0, 1));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// If the amount of branches is 3+, we calculate the geometric centroid of the shape, assuming correct ordering of</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// the terminals within the params struct, and our assumption of a convex polygon</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (params.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a> &gt;= 3) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        Eigen::Vector2d center = Eigen::Vector2d::Zero();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; params.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; ++i) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            center += params.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 0);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">return</span> center / params.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    LF_ASSERT_MSG(<span class="keyword">false</span>, <span class="stringliteral">&quot;The parametrization params sent to findCenter have an &quot;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                  <span class="stringliteral">&quot;incorrect number of branches, &quot;</span> &lt;&lt; params.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="ttc" id="astructMeshParametrizationData_html_a6757fe1055d22523c940926dfe594bd8"><div class="ttname"><a href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">MeshParametrizationData::terminals</a></div><div class="ttdeci">Eigen::MatrixXd terminals</div><div class="ttdoc">Matrix of terminal points (2*numBranches × 3)</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.h:75</div></div>
<div class="ttc" id="astructMeshParametrizationData_html_adda268017d91178d76eccae27c55ab01"><div class="ttname"><a href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">MeshParametrizationData::numBranches</a></div><div class="ttdeci">int numBranches</div><div class="ttdoc">Number of branches in parametrization.</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.h:73</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab573a3ecdbe060d4a5b1a6b8d6d4c545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab573a3ecdbe060d4a5b1a6b8d6d4c545">&#9670;&nbsp;</a></span>flipVectorEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> DataOperations::flipVectorEntry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParametrizationEntry.html">ParametrizationEntry</a> &amp;&#160;</td>
          <td class="paramname"><em>param_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::pair&lt; double, int &gt; &amp;&#160;</td>
          <td class="paramname"><em>flip_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::mt19937 &amp;&#160;</td>
          <td class="paramname"><em>rng</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates flipped variations of a parametrization entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_entry</td><td>Base parametrization entry </td></tr>
    <tr><td class="paramname">flip_params</td><td>Pair of (flip probability, linear scale factor) </td></tr>
    <tr><td class="paramname">rng</td><td>Random number generator from <a class="el" href="structGenerationParams.html">GenerationParams</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Dataset containing flipped variations of param_entry, inclusive of param_entry </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06" title="Type alias for a collection of mesh parametrization entries.">ParametrizationDataSet</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                                        {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// Initialize the data set we will return and add our initial un-flipped entry</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> flipped_data_set;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    flipped_data_set.emplace_back(param_entry);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// Obtain the vector of samples</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">int</span> num_flips = std::min(param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a> * flip_params.second,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordtype">int</span>(pow(2, 3 * param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>)) - 1);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordtype">int</span> num_potential_flips = int(pow(2, 3 * param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>)) - 1;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keyword">auto</span> samples = <a class="code" href="namespaceDataOperations.html#a85bfa90798984f1b432045392252da6f">sampleWithoutReplacement</a>(1, num_potential_flips, num_flips, rng);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    std::uniform_real_distribution&lt;&gt; probability(0.0, 1.0);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// Start a loop for the amount of flips we would like to perform</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> sample : samples) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="comment">// Obtain the indices to flip by converting the sampled number to binary</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keyword">auto</span> flip_indices = <a class="code" href="namespaceDataOperations.html#af2301cb80271dc293823b47300057412">numberToBoolVector</a>(sample, 3 * param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordtype">bool</span> flipped = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        Eigen::MatrixXd new_vectors(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="comment">// Flip the vectors according to the 1&#39;s in the vector and our flip probability</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">if</span> (probability(rng) &lt; flip_params.first) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            flipped = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 3 * param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>; ++j) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <span class="keywordflow">if</span> (flip_indices[j]) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                    new_vectors(2 * (j / 3), j % 3) = -new_vectors(2 * (j / 3), j % 3);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                    new_vectors(2 * (j / 3) + 1, j % 3) = -new_vectors(2 * (j / 3) + 1, j % 3);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="comment">// If we flipped vectors, we add the flipped ParametrizationEntry to the data_set, this is to make sure we</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">// don&#39;t have a repeat of the entry we received</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">if</span> (flipped) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <a class="code" href="structMeshParametrizationData.html">MeshParametrizationData</a> new_param {param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>, param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>, new_vectors};</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            flipped_data_set.emplace_back(param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>, new_param,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                          param_entry.<a class="code" href="structParametrizationEntry.html#a4ed1ea05469f5947c50ca641e49b8e3a">displacements</a>, param_entry.<a class="code" href="structParametrizationEntry.html#a4b065ed9f6d4625ab397fc710f5adadb">energyDifference</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> flipped_data_set;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="ttc" id="adata__operations_8h_html_a86020b2a5c552ab01e00ec9d0d250f06"><div class="ttname"><a href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a></div><div class="ttdeci">std::vector&lt; ParametrizationEntry &gt; ParametrizationDataSet</div><div class="ttdoc">Type alias for a collection of mesh parametrization entries.</div><div class="ttdef"><b>Definition:</b> data_operations.h:178</div></div>
<div class="ttc" id="anamespaceDataOperations_html_a85bfa90798984f1b432045392252da6f"><div class="ttname"><a href="namespaceDataOperations.html#a85bfa90798984f1b432045392252da6f">DataOperations::sampleWithoutReplacement</a></div><div class="ttdeci">std::vector&lt; int &gt; sampleWithoutReplacement(int min, int max, int n, std::mt19937 &amp;rng)</div><div class="ttdoc">Samples n unique integers from [min, max] without replacement.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:25</div></div>
<div class="ttc" id="anamespaceDataOperations_html_af2301cb80271dc293823b47300057412"><div class="ttname"><a href="namespaceDataOperations.html#af2301cb80271dc293823b47300057412">DataOperations::numberToBoolVector</a></div><div class="ttdeci">std::vector&lt; bool &gt; numberToBoolVector(unsigned int number, int bits)</div><div class="ttdoc">Converts an unsigned integer to a boolean vector, with 1st index being the ones place.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:14</div></div>
<div class="ttc" id="astructMeshParametrizationData_html"><div class="ttname"><a href="structMeshParametrizationData.html">MeshParametrizationData</a></div><div class="ttdoc">Container for mesh parametrization geometric data.</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.h:72</div></div>
<div class="ttc" id="astructMeshParametrizationData_html_a4e3e56c925463080a2a16eafecd61158"><div class="ttname"><a href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">MeshParametrizationData::vectors</a></div><div class="ttdeci">Eigen::MatrixXd vectors</div><div class="ttdoc">Matrix of direction vectors (2*numBranches × 3)</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.h:76</div></div>
<div class="ttc" id="astructMeshParametrizationData_html_adc3fe2ea07198c41c220ac5fc42f0117"><div class="ttname"><a href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">MeshParametrizationData::widths</a></div><div class="ttdeci">Eigen::MatrixXd widths</div><div class="ttdoc">Matrix of branch widths (numBranches × 3)</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.h:74</div></div>
<div class="ttc" id="astructParametrizationEntry_html_a4b065ed9f6d4625ab397fc710f5adadb"><div class="ttname"><a href="structParametrizationEntry.html#a4b065ed9f6d4625ab397fc710f5adadb">ParametrizationEntry::energyDifference</a></div><div class="ttdeci">double energyDifference</div><div class="ttdoc">Energy difference of the FEM problem.</div><div class="ttdef"><b>Definition:</b> data_operations.h:158</div></div>
<div class="ttc" id="astructParametrizationEntry_html_a4ed1ea05469f5947c50ca641e49b8e3a"><div class="ttname"><a href="structParametrizationEntry.html#a4ed1ea05469f5947c50ca641e49b8e3a">ParametrizationEntry::displacements</a></div><div class="ttdeci">Eigen::MatrixXd displacements</div><div class="ttdoc">Matrix of displacement vectors as boundary conditions.</div><div class="ttdef"><b>Definition:</b> data_operations.h:157</div></div>
<div class="ttc" id="astructParametrizationEntry_html_a793247066495ce73c374ea9890cbe273"><div class="ttname"><a href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">ParametrizationEntry::param</a></div><div class="ttdeci">MeshParametrizationData param</div><div class="ttdoc">Parametrization containing the geometry of the branch.</div><div class="ttdef"><b>Definition:</b> data_operations.h:156</div></div>
<div class="ttc" id="astructParametrizationEntry_html_a96d7469f6124ff71dc42faabdf6f71e0"><div class="ttname"><a href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">ParametrizationEntry::numBranches</a></div><div class="ttdeci">int numBranches</div><div class="ttdoc">Number of branches in the parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.h:155</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64cd3643680cdedef8e9696f57fdf528"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64cd3643680cdedef8e9696f57fdf528">&#9670;&nbsp;</a></span>generateDisplacementBCs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> DataOperations::generateDisplacementBCs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;&#160;</td>
          <td class="paramname"><em>base_param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDisplacementParams.html">DisplacementParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates displacement boundary conditions for a parametrization. </p>
<p>Takes a parametrization and generates a dataset where all entries are in the linear elastic region of the material</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base_param</td><td>Base parametrization to generate displacements for </td></tr>
    <tr><td class="paramname">params</td><td>Displacement generation parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Dataset containing entries with different displacement BCs </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structDisplacementParams.html" title="Parameters for generating displacement boundary conditions.">DisplacementParams</a> For parameter details </dd>
<dd>
<a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06" title="Type alias for a collection of mesh parametrization entries.">ParametrizationDataSet</a> For return type structure </dd></dl>
<div class="fragment"><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                                                                                                   {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// We check the given base parametrization to make sure it is valid</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceMeshParametrization.html#a04f329e14a41574a8b4a5a8eafd152e2">MeshParametrization::meshParamValidator</a>(base_param)) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">// Declare vector of max distances, which will be the variance when generating displacements</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    std::vector&lt;double&gt; max_distances;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> displaced_entries;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    std::uniform_real_distribution&lt;double&gt; unif(params.<a class="code" href="structDisplacementParams.html#aebdc41f451795c29c4c19bb027b173d6">percentYieldStrength</a>.first, params.<a class="code" href="structDisplacementParams.html#aebdc41f451795c29c4c19bb027b173d6">percentYieldStrength</a>.second);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a> == 1) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// Use the following heuristic to determine the maximum allowable strain for calculating displacement vectors</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordtype">double</span> max_stress = unif(params.<a class="code" href="structDisplacementParams.html#a4622c7e909d18f177b6949c12c02a544">rng</a>) * params.<a class="code" href="structDisplacementParams.html#acd6e268994df9f4d2d48719d01d24ab3">yieldStrength</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordtype">double</span> max_strain = max_stress / params.<a class="code" href="structDisplacementParams.html#a10a9d4f87f7a3f475c5acf5ea2c54af4">modulusOfElasticity</a>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment">// Obtain the std deviation we&#39;ll be using when rotating the vectors</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordtype">double</span> approx_length = (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(1) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(0)).norm() +</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(2) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(1)).norm();</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordtype">double</span> approx_width = base_param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>.mean();</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        max_distances.emplace_back(std::min(approx_width, approx_length) * max_strain);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="structDisplacementGenerators.html">DisplacementGenerators</a> perturb_params = {params.<a class="code" href="structDisplacementParams.html#af9d8116a9e02c3d216100a222b3e159c">displacementProbability</a>, max_distances, params.<a class="code" href="structDisplacementParams.html#a4622c7e909d18f177b6949c12c02a544">rng</a>};</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="structcalculationParams.html">calculationParams</a> calc_energy_params {params.<a class="code" href="structDisplacementParams.html#acd6e268994df9f4d2d48719d01d24ab3">yieldStrength</a>, params.<a class="code" href="structDisplacementParams.html#a10a9d4f87f7a3f475c5acf5ea2c54af4">modulusOfElasticity</a>,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            params.<a class="code" href="structDisplacementParams.html#ad52cfd862d6ef0e05c79480a51f63ca8">poissonRatio</a>,params.<a class="code" href="structDisplacementParams.html#a7d3268ec207c67c310ce439b87a73b64">meshSize</a>, params.<a class="code" href="structDisplacementParams.html#aa05111b7c42b94896a46c023db47f5f1">order</a>};</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="comment">// Keep adding data entries until we reach our desired size for this base_param</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">while</span> (displaced_entries.size() &lt; params.<a class="code" href="structDisplacementParams.html#ae2002a8bec71cbd9d226f02a8e9eb304">numDisplacements</a>) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keyword">auto</span> displacements = <a class="code" href="namespaceDataOperations.html#a804a039949519937d4e204b181bb3109">singleBranchDisplacements</a>(perturb_params);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            std::pair&lt;bool, double&gt; energy_check = <a class="code" href="namespaceMeshParametrization.html#a22ca202a06e1981f1b7f2ff7a6e532e3">MeshParametrization::displacementEnergy</a>(base_param,</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                displacements, calc_energy_params);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="comment">// If we are still in the linear elastic region, we reset count and add to our dataset,</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="comment">// else we increment count</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="keywordflow">if</span> (energy_check.first) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                count = 0;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                displaced_entries.emplace_back(1, base_param, displacements, energy_check.second);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                count++;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="keywordflow">if</span> (count &gt;= 50) <span class="keywordflow">return</span> displaced_entries;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">// Same as in the single branch case, but slightly modified to handle multiple branches</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a> &gt;= 3) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="comment">// Same calculation as in the single branch case, calculate a maximum allowable strain heuristic</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="comment">// for displacement vectors</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordtype">double</span> max_stress = unif(params.<a class="code" href="structDisplacementParams.html#a4622c7e909d18f177b6949c12c02a544">rng</a>) * params.<a class="code" href="structDisplacementParams.html#acd6e268994df9f4d2d48719d01d24ab3">yieldStrength</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordtype">double</span> max_strain = max_stress / params.<a class="code" href="structDisplacementParams.html#a10a9d4f87f7a3f475c5acf5ea2c54af4">modulusOfElasticity</a>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; ++i) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="comment">// Obtain the length and use this to find the maximum allowable distance for this branch</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordtype">double</span> approx_length = (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 1) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 0)).norm() +</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                   (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 2) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 1)).norm();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="keywordtype">double</span> approx_width = base_param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>.row(i).mean();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            max_distances.emplace_back(std::min(approx_length, approx_width) * max_strain);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <a class="code" href="structDisplacementGenerators.html">DisplacementGenerators</a> perturb_params = {params.<a class="code" href="structDisplacementParams.html#af9d8116a9e02c3d216100a222b3e159c">displacementProbability</a>, max_distances, params.<a class="code" href="structDisplacementParams.html#a4622c7e909d18f177b6949c12c02a544">rng</a>};</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <a class="code" href="structcalculationParams.html">calculationParams</a> calc_energy_params {params.<a class="code" href="structDisplacementParams.html#acd6e268994df9f4d2d48719d01d24ab3">yieldStrength</a>, params.<a class="code" href="structDisplacementParams.html#a10a9d4f87f7a3f475c5acf5ea2c54af4">modulusOfElasticity</a>,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            params.<a class="code" href="structDisplacementParams.html#ad52cfd862d6ef0e05c79480a51f63ca8">poissonRatio</a>,params.<a class="code" href="structDisplacementParams.html#a7d3268ec207c67c310ce439b87a73b64">meshSize</a>, params.<a class="code" href="structDisplacementParams.html#aa05111b7c42b94896a46c023db47f5f1">order</a>};</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="comment">// Keep adding data entries until we reach our desired size for this base_param</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">while</span> (displaced_entries.size() &lt; params.<a class="code" href="structDisplacementParams.html#ae2002a8bec71cbd9d226f02a8e9eb304">numDisplacements</a>) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keyword">auto</span> displacements = <a class="code" href="namespaceDataOperations.html#ac0918c3d7ed909a9613b34d36f6f44d2">multiBranchDisplacements</a>(base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>, perturb_params);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            std::pair&lt;bool, double&gt; energy_check = <a class="code" href="namespaceMeshParametrization.html#a22ca202a06e1981f1b7f2ff7a6e532e3">MeshParametrization::displacementEnergy</a>(base_param,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                displacements, calc_energy_params);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="comment">// If we are still in the linear elastic region, we reset count and add to our dataset,</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="comment">// else we increment count</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordflow">if</span> (energy_check.first) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                count = 0;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                displaced_entries.emplace_back(base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>, base_param, displacements, energy_check.second);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                count++;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="keywordflow">if</span> (count &gt;= 50) <span class="keywordflow">return</span> displaced_entries;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        LF_ASSERT_MSG(<span class="keyword">false</span>, <span class="stringliteral">&quot;Wrong number of branches sent to generateDisplacementBCs, &quot;</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        &lt;&lt; base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> displaced_entries;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="ttc" id="anamespaceDataOperations_html_a804a039949519937d4e204b181bb3109"><div class="ttname"><a href="namespaceDataOperations.html#a804a039949519937d4e204b181bb3109">DataOperations::singleBranchDisplacements</a></div><div class="ttdeci">Eigen::MatrixXd singleBranchDisplacements(DisplacementGenerators &amp;param_gens)</div><div class="ttdoc">Generates displacement boundary conditions for a single branch parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:341</div></div>
<div class="ttc" id="anamespaceDataOperations_html_ac0918c3d7ed909a9613b34d36f6f44d2"><div class="ttname"><a href="namespaceDataOperations.html#ac0918c3d7ed909a9613b34d36f6f44d2">DataOperations::multiBranchDisplacements</a></div><div class="ttdeci">Eigen::MatrixXd multiBranchDisplacements(int num, DisplacementGenerators &amp;param_gens)</div><div class="ttdoc">Generates displacement boundary conditions for a multi-branch parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:364</div></div>
<div class="ttc" id="anamespaceMeshParametrization_html_a04f329e14a41574a8b4a5a8eafd152e2"><div class="ttname"><a href="namespaceMeshParametrization.html#a04f329e14a41574a8b4a5a8eafd152e2">MeshParametrization::meshParamValidator</a></div><div class="ttdeci">bool meshParamValidator(MeshParametrizationData &amp;param)</div><div class="ttdoc">Validates complete mesh parametrization.</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.cc:382</div></div>
<div class="ttc" id="anamespaceMeshParametrization_html_a22ca202a06e1981f1b7f2ff7a6e532e3"><div class="ttname"><a href="namespaceMeshParametrization.html#a22ca202a06e1981f1b7f2ff7a6e532e3">MeshParametrization::displacementEnergy</a></div><div class="ttdeci">std::pair&lt; bool, double &gt; displacementEnergy(MeshParametrizationData &amp;param, Eigen::MatrixXd &amp;displacement, const calculationParams &amp;calc_params)</div><div class="ttdoc">Calculates displacement energy and checks if in the linear elastic region.</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.cc:745</div></div>
<div class="ttc" id="astructDisplacementGenerators_html"><div class="ttname"><a href="structDisplacementGenerators.html">DisplacementGenerators</a></div><div class="ttdoc">Random number generators for multi-branch displacement BCs.</div><div class="ttdef"><b>Definition:</b> data_operations.h:498</div></div>
<div class="ttc" id="astructDisplacementParams_html_a10a9d4f87f7a3f475c5acf5ea2c54af4"><div class="ttname"><a href="structDisplacementParams.html#a10a9d4f87f7a3f475c5acf5ea2c54af4">DisplacementParams::modulusOfElasticity</a></div><div class="ttdeci">double modulusOfElasticity</div><div class="ttdoc">Young's modulus (E)</div><div class="ttdef"><b>Definition:</b> data_operations.h:442</div></div>
<div class="ttc" id="astructDisplacementParams_html_a4622c7e909d18f177b6949c12c02a544"><div class="ttname"><a href="structDisplacementParams.html#a4622c7e909d18f177b6949c12c02a544">DisplacementParams::rng</a></div><div class="ttdeci">std::mt19937 &amp; rng</div><div class="ttdoc">Reference to random number generator from GenerationParams.</div><div class="ttdef"><b>Definition:</b> data_operations.h:449</div></div>
<div class="ttc" id="astructDisplacementParams_html_a7d3268ec207c67c310ce439b87a73b64"><div class="ttname"><a href="structDisplacementParams.html#a7d3268ec207c67c310ce439b87a73b64">DisplacementParams::meshSize</a></div><div class="ttdeci">double meshSize</div><div class="ttdoc">Size parameter for mesh generation.</div><div class="ttdef"><b>Definition:</b> data_operations.h:446</div></div>
<div class="ttc" id="astructDisplacementParams_html_aa05111b7c42b94896a46c023db47f5f1"><div class="ttname"><a href="structDisplacementParams.html#aa05111b7c42b94896a46c023db47f5f1">DisplacementParams::order</a></div><div class="ttdeci">int order</div><div class="ttdoc">Order of finite element calculation.</div><div class="ttdef"><b>Definition:</b> data_operations.h:447</div></div>
<div class="ttc" id="astructDisplacementParams_html_acd6e268994df9f4d2d48719d01d24ab3"><div class="ttname"><a href="structDisplacementParams.html#acd6e268994df9f4d2d48719d01d24ab3">DisplacementParams::yieldStrength</a></div><div class="ttdeci">double yieldStrength</div><div class="ttdoc">Material yield strength.</div><div class="ttdef"><b>Definition:</b> data_operations.h:444</div></div>
<div class="ttc" id="astructDisplacementParams_html_ad52cfd862d6ef0e05c79480a51f63ca8"><div class="ttname"><a href="structDisplacementParams.html#ad52cfd862d6ef0e05c79480a51f63ca8">DisplacementParams::poissonRatio</a></div><div class="ttdeci">double poissonRatio</div><div class="ttdoc">Poisson's ratio (ν)</div><div class="ttdef"><b>Definition:</b> data_operations.h:443</div></div>
<div class="ttc" id="astructDisplacementParams_html_ae2002a8bec71cbd9d226f02a8e9eb304"><div class="ttname"><a href="structDisplacementParams.html#ae2002a8bec71cbd9d226f02a8e9eb304">DisplacementParams::numDisplacements</a></div><div class="ttdeci">int numDisplacements</div><div class="ttdoc">Number of displacement BCs to generate.</div><div class="ttdef"><b>Definition:</b> data_operations.h:441</div></div>
<div class="ttc" id="astructDisplacementParams_html_aebdc41f451795c29c4c19bb027b173d6"><div class="ttname"><a href="structDisplacementParams.html#aebdc41f451795c29c4c19bb027b173d6">DisplacementParams::percentYieldStrength</a></div><div class="ttdeci">std::pair&lt; double, double &gt; percentYieldStrength</div><div class="ttdoc">Range for displacement scaling.</div><div class="ttdef"><b>Definition:</b> data_operations.h:445</div></div>
<div class="ttc" id="astructDisplacementParams_html_af9d8116a9e02c3d216100a222b3e159c"><div class="ttname"><a href="structDisplacementParams.html#af9d8116a9e02c3d216100a222b3e159c">DisplacementParams::displacementProbability</a></div><div class="ttdeci">double displacementProbability</div><div class="ttdoc">Probability of applying displacement [0, 1].</div><div class="ttdef"><b>Definition:</b> data_operations.h:448</div></div>
<div class="ttc" id="astructcalculationParams_html"><div class="ttname"><a href="structcalculationParams.html">calculationParams</a></div><div class="ttdoc">Parameters for finite element calculations and mesh generation.</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0cdeb3fcb186c94a588a55742c3fe2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0cdeb3fcb186c94a588a55742c3fe2f">&#9670;&nbsp;</a></span>generateMidPointsAndVectors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::tuple&lt; Eigen::MatrixXd, Eigen::MatrixXd, Eigen::MatrixXd, Eigen::MatrixXd &gt; DataOperations::generateMidPointsAndVectors </td>
          <td>(</td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>side_lengths</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates midpoints and vectors for multi-branch construction. </p>
<p>Use the vector of side lengths provided, an iterative algorithm is used to find the vertices of a shape with the given side lengths </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">side_lengths</td><td>Vector of branch lengths </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Tuple of matrices containing (midpoints, outward-pointing vectors, sideways-pointing vectors, vertices) </dd></dl>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                       {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// Declare return variables</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordtype">int</span> n = side_lengths.size();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    Eigen::MatrixXd vertices(2, n);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    Eigen::MatrixXd outward_vectors(2, n);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    Eigen::MatrixXd midpoints(2, n);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    Eigen::MatrixXd side_vectors(2, n);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Place vertices in an initial circular shape corresponding to the side lengths</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">double</span> angle = 0;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    vertices.col(0) = Eigen::Vector2d(0, 0);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; n; ++i) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        angle += 2 * M_PI / n;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        vertices.col(i) = vertices.col(i-1) +</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            side_lengths(i-1) * Eigen::Vector2d(std::cos(angle), std::sin(angle));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">// Iterative adjustment until all side lengths are exactly as we desired</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> max_iterations = 1000;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> tolerance = 1e-6;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iter = 0; iter &lt; max_iterations; ++iter) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordtype">bool</span> converged = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordtype">int</span> next = (i + 1) % n;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            Eigen::Vector2d edge = vertices.col(next) - vertices.col(i);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordtype">double</span> current_length = edge.norm();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordtype">double</span> target_length = side_lengths(i);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="comment">// We adjust the vertices so that the side length is closer to what it should be</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">if</span> (std::abs(current_length - target_length) &gt; tolerance) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                converged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <span class="keywordtype">double</span> scale = target_length / current_length;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                Eigen::Vector2d mid_point = 0.5 * (vertices.col(i) + vertices.col(next));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                vertices.col(i) = mid_point + 0.5 * scale * (vertices.col(i) - mid_point);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                vertices.col(next) = mid_point + 0.5 * scale * (vertices.col(next) - mid_point);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> (converged) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// If the polygon doesn&#39;t match our initial side lengths, we re-scale</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">double</span> avg_scale = 0;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordtype">int</span> next = (i + 1) % n;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        Eigen::Vector2d edge = vertices.col(next) - vertices.col(i);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordtype">double</span> current_length = edge.norm();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        avg_scale += side_lengths(i) / current_length;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    avg_scale /= n;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    vertices *= avg_scale;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Center the polygon</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    Eigen::Vector2d centroid = vertices.rowwise().mean();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    vertices.colwise() -= centroid;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Calculate outward vectors, midpoints, and side vectors, and return</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordtype">int</span> next = (i + 1) % n;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        Eigen::Vector2d edge = vertices.col(next) - vertices.col(i);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        midpoints.col(i) = (vertices.col(i) + vertices.col(next)) / 2.0;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        outward_vectors.col(i) = Eigen::Vector2d(edge.y(), -edge.x()).normalized();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        side_vectors.col(i) = edge.normalized();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> {midpoints, outward_vectors, side_vectors, vertices};</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad852ba572234ef023dd0ccea7f279599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad852ba572234ef023dd0ccea7f279599">&#9670;&nbsp;</a></span>generateMultiBranchParametrization()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> DataOperations::generateMultiBranchParametrization </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>widths</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::VectorXd &amp;&#160;</td>
          <td class="paramname"><em>lengths</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a multi-branch parametrization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Number of branches </td></tr>
    <tr><td class="paramname">widths</td><td>Vector of branch widths </td></tr>
    <tr><td class="paramname">lengths</td><td>Vector of branch lengths </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Mesh parametrization for multiple branches </dd></dl>
<div class="fragment"><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                                                                                                         {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    LF_ASSERT_MSG(widths.size() == lengths.size() and num == widths.size(), <span class="stringliteral">&quot;Sizes of widths and lengths do not match in &quot;</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="stringliteral">&quot;generateMultiBranchParametrization, widths size: &quot;</span> &lt;&lt; widths.size() &lt;&lt; <span class="stringliteral">&quot;, lengths size: &quot;</span> &lt;&lt; lengths.size());</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">if</span> (num &gt;= 3) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="comment">// Declare matrices that will take part in the final parametrization</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        Eigen::MatrixXd terminals(num * 2, 3);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        Eigen::MatrixXd vectors(num * 2, 3);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        Eigen::MatrixXd new_widths = widths.replicate(1, 3);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="comment">// The following is a tuple containing the midpoints, unit outward pointing vectors, and unit side vectors</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keyword">auto</span> midpoints_and_vectors = <a class="code" href="namespaceDataOperations.html#ae0cdeb3fcb186c94a588a55742c3fe2f">generateMidPointsAndVectors</a>(widths);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="comment">// Iterate through all branches and return desired vector</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num; ++i) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <span class="comment">// Initialize the 3 vectors for this branch, which are the same since we assume a straight branch</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            vectors.block&lt;2, 3&gt;(i * 2, 0) &lt;&lt; std::get&lt;2&gt;(midpoints_and_vectors).col(i).replicate(1, 3);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="comment">// Initialize the terminals using the given length and outward pointing vectors</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            terminals.block&lt;2, 1&gt;(i * 2, 0) &lt;&lt; std::get&lt;0&gt;(midpoints_and_vectors).block&lt;2, 1&gt;(0, i);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            terminals.block&lt;2, 1&gt;(i * 2, 1) = terminals.block&lt;2, 1&gt;(i * 2, 0) +</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    std::get&lt;1&gt;(midpoints_and_vectors).block&lt;2, 1&gt;(0, i) * lengths[i] / 2;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            terminals.block&lt;2, 1&gt;(i * 2, 2) = terminals.block&lt;2, 1&gt;(i * 2, 1) +</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                    std::get&lt;1&gt;(midpoints_and_vectors).block&lt;2, 1&gt;(0, i) * lengths[i] / 2;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">return</span> {num, new_widths, terminals, vectors};</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    LF_ASSERT_MSG(<span class="keyword">false</span>, <span class="stringliteral">&quot;Incorrect number of branches sent to generateMultiBranchParametrization, &quot;</span> &lt;&lt; num);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div>
<div class="ttc" id="anamespaceDataOperations_html_ae0cdeb3fcb186c94a588a55742c3fe2f"><div class="ttname"><a href="namespaceDataOperations.html#ae0cdeb3fcb186c94a588a55742c3fe2f">DataOperations::generateMidPointsAndVectors</a></div><div class="ttdeci">std::tuple&lt; Eigen::MatrixXd, Eigen::MatrixXd, Eigen::MatrixXd, Eigen::MatrixXd &gt; generateMidPointsAndVectors(const Eigen::VectorXd &amp;side_lengths)</div><div class="ttdoc">Generates midpoints and vectors for multi-branch construction.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:271</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a334d6c3874f7171cfef100805f2287f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a334d6c3874f7171cfef100805f2287f8">&#9670;&nbsp;</a></span>generateParametrizationDataSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> DataOperations::generateParametrizationDataSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structGenerationParams.html">GenerationParams</a> &amp;&#160;</td>
          <td class="paramname"><em>gen_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a complete parametrization dataset, according to Algorithm 1 of the report. </p>
<p>First, the algorithm determines how many branches this dataset for its parametrizations and initializes the relevant object Second, it generates a base parametrization and multiple perturbations to induce some curvature Third, it generates displacement BCs for each of these perturbations Fourth, it rotates these entries according to the given rotation parameters, then adds these to the dataset</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gen_params</td><td>Generation parameters </td></tr>
    <tr><td class="paramname">verbose</td><td>Enable verbose output </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Dataset of parametrizations </dd></dl>
<div class="fragment"><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                                {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// Declare the dataset and reserve space for it</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> data_set;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    data_set.reserve(gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// Initialize necessary random number generators for width and length, and perturbation parameters</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    std::uniform_real_distribution&lt;&gt; length_dist(gen_params.<a class="code" href="structGenerationParams.html#a64f5cb04a7a7102752159e5cf4b7f200">lengthInterval</a>.first, gen_params.<a class="code" href="structGenerationParams.html#a64f5cb04a7a7102752159e5cf4b7f200">lengthInterval</a>.second);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    std::uniform_real_distribution&lt;&gt; width_dist(gen_params.<a class="code" href="structGenerationParams.html#a54ba1885af006660d1b8dcb8d1c57511">widthInterval</a>.first, gen_params.<a class="code" href="structGenerationParams.html#a54ba1885af006660d1b8dcb8d1c57511">widthInterval</a>.second);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="structDisplacementParams.html">DisplacementParams</a> displacement_params {gen_params};</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="structPerturbationParams.html">PerturbationParams</a> perturbation_params {gen_params};</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">// This vector will hold the correct value of the tags throughout the loop</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    std::vector&lt;int&gt; tagCounter(<a class="code" href="data__operations_8h.html#a124dab2ed7941f6ea9293d26064a0e39">NUM_TAGS</a>, -1);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// Initialize counters so we don&#39;t run into any infinite loops</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordtype">int</span> count_base = 0;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordtype">int</span> base_limit = 10;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordtype">int</span> count_displace = 0;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordtype">int</span> displace_limit = 10;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">// Report progress every 1% for large datasets, and every 10% for small datasets</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">int</span> progress = 0;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordtype">int</span> progress_step;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a> &gt; 250) progress_step = gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a> / 100;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">else</span> progress_step = gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a> / 10;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keyword">auto</span> start_time = std::chrono::high_resolution_clock::now();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keyword">auto</span> last_report_time = start_time;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">// Iterate until we have our desired dataset size</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">while</span> (data_set.size() &lt; gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a>) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <a class="code" href="structMeshParametrizationData.html">MeshParametrizationData</a> base_param;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">if</span> (gen_params.<a class="code" href="structGenerationParams.html#afe31a30af2ae8df6b767d7d4e6b26956">numBranches</a> == 1) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="comment">// Generate a base parametrization with the generated length and width</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <span class="keywordtype">double</span> length = length_dist(gen_params.<a class="code" href="structGenerationParams.html#a6b62cc852db31daab1e4d529bdac094b">rng</a>);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="keywordtype">double</span> width = width_dist(gen_params.<a class="code" href="structGenerationParams.html#a6b62cc852db31daab1e4d529bdac094b">rng</a>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            base_param = <a class="code" href="namespaceDataOperations.html#a728214b2b3f055905c5ddf6cba3e9df3">generateSingleBranchParametrization</a>(1, width, length);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gen_params.<a class="code" href="structGenerationParams.html#afe31a30af2ae8df6b767d7d4e6b26956">numBranches</a> &gt;= 3) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="comment">// Initialize vector of widths and lengths for each branch</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            Eigen::VectorXd lengths(gen_params.<a class="code" href="structGenerationParams.html#afe31a30af2ae8df6b767d7d4e6b26956">numBranches</a>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            Eigen::VectorXd widths(gen_params.<a class="code" href="structGenerationParams.html#afe31a30af2ae8df6b767d7d4e6b26956">numBranches</a>);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; gen_params.<a class="code" href="structGenerationParams.html#afe31a30af2ae8df6b767d7d4e6b26956">numBranches</a>; ++i) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                lengths(i) = length_dist(gen_params.<a class="code" href="structGenerationParams.html#a6b62cc852db31daab1e4d529bdac094b">rng</a>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                widths(i) = width_dist(gen_params.<a class="code" href="structGenerationParams.html#a6b62cc852db31daab1e4d529bdac094b">rng</a>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="comment">// Generate base multi-branch parametrization</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            base_param = <a class="code" href="namespaceDataOperations.html#ad852ba572234ef023dd0ccea7f279599">generateMultiBranchParametrization</a>(gen_params.<a class="code" href="structGenerationParams.html#afe31a30af2ae8df6b767d7d4e6b26956">numBranches</a>, widths, lengths);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="comment">// With a base_param now initialized, we update the indices in tags</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657aa7d623548e49a1514076f5bee3b314a4">TagIndex::BASE</a>]++;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a2f016347a7a9b442bd11158264f810f9">TagIndex::BASE_PERTURBATION</a>] = -1;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="comment">// Generate perturbed versions of the base parametrization</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        std::vector&lt;MeshParametrizationData&gt; perturbed_base = <a class="code" href="namespaceDataOperations.html#aa89de93a8e7923d122feb9003b981469">generatePeturbedParametrizations</a>(</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            base_param, perturbation_params);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="comment">// If the returned vector is empty, we make sure not to increment the base tag</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">if</span> (perturbed_base.empty()) tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657aa7d623548e49a1514076f5bee3b314a4">TagIndex::BASE</a>]--;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="comment">// Increment count of base if the desired size is not reached, otherwise reset it</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">if</span> (perturbed_base.size() &lt; perturbation_params.numPerturbations) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            count_base++;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">if</span> (count_base &gt;= base_limit) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;The perturbation params are not ideal, dataset returned early \n&quot;</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <span class="keywordflow">return</span> data_set;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">else</span> count_base = 0;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="comment">// Iterate through the perturbed versions of base and create displacements of each, update tag</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="structMeshParametrizationData.html">MeshParametrizationData</a> perturbed_base_param : perturbed_base) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a2f016347a7a9b442bd11158264f810f9">TagIndex::BASE_PERTURBATION</a>]++;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a3c54d663cec525a4311244f2e34399b9">TagIndex::DISPLACEMENT</a>] = -1;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="comment">// Provide displacement boundary conditions for each of these perturbed parametrizations</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <a class="code" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> displaced_perturbed_base = <a class="code" href="namespaceDataOperations.html#a64cd3643680cdedef8e9696f57fdf528">generateDisplacementBCs</a>(</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                perturbed_base_param, displacement_params);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="comment">// Reset the tag counter if the returned dataset is empty</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">if</span> (displaced_perturbed_base.empty()) tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a2f016347a7a9b442bd11158264f810f9">TagIndex::BASE_PERTURBATION</a>]--;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="comment">// Increment count of base if the desired size is not reached, otherwise reset it</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="keywordflow">if</span> (displaced_perturbed_base.size() &lt; displacement_params.numDisplacements) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                count_displace++;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                <span class="keywordflow">if</span> (count_displace &gt;= displace_limit) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                    std::cout &lt;&lt; <span class="stringliteral">&quot;The displacement params are not ideal, dataset returned early \n&quot;</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                    <span class="keywordflow">return</span> data_set;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keywordflow">else</span> count_displace = 0;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="comment">// Iterate through each displaced and perturbed entry and rotate, update tags as well</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="structParametrizationEntry.html">ParametrizationEntry</a> disp_perturbed_base : displaced_perturbed_base) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a3c54d663cec525a4311244f2e34399b9">TagIndex::DISPLACEMENT</a>]++;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a8db8a3d707eb71d99426d81ffb207e54">TagIndex::ROTATION</a>] = -1;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <a class="code" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> rotated = <a class="code" href="namespaceDataOperations.html#ac83786aa2f7e93613972c7fb0a171970">rotateParametrization</a>(</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                    disp_perturbed_base, gen_params.<a class="code" href="structGenerationParams.html#a2d86085e6b5a283b174653daf7e8e2b5">dataRotationParams</a>, gen_params.<a class="code" href="structGenerationParams.html#a6b62cc852db31daab1e4d529bdac094b">rng</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                <span class="comment">// Iterate through each rotated, displaced, and perturbed entry, flip them according to flip params</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="structParametrizationEntry.html">ParametrizationEntry</a> rot_perturb : rotated) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                    tagCounter[<a class="code" href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a8db8a3d707eb71d99426d81ffb207e54">TagIndex::ROTATION</a>]++;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                    <a class="code" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> flip_perturb_rot = <a class="code" href="namespaceDataOperations.html#ab573a3ecdbe060d4a5b1a6b8d6d4c545">flipVectorEntry</a>(</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                        rot_perturb, gen_params.<a class="code" href="structGenerationParams.html#a245be9c5723ba14e9fb3de9d65f50598">flipParams</a>, gen_params.<a class="code" href="structGenerationParams.html#a6b62cc852db31daab1e4d529bdac094b">rng</a>);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                    <span class="comment">// Add the tags to each entry and add to the overall dataset</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                    std::transform(flip_perturb_rot.begin(), flip_perturb_rot.end(),</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                                   std::back_inserter(data_set),</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                                   [&amp;tagCounter] (<a class="code" href="structParametrizationEntry.html">ParametrizationEntry</a> entry) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                                        entry.tags = tagCounter;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                                        return entry;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                    });</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="comment">// If verbose is true, and we&#39;ve made enough progress, we print the progress we&#39;ve made and the</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="comment">// time it took to do so</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="keywordflow">if</span> (verbose and data_set.size() &gt;= progress + progress_step) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="keyword">auto</span> current_time = std::chrono::high_resolution_clock::now();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="keyword">auto</span> total_duration = std::chrono::duration_cast&lt;std::chrono::seconds&gt;(current_time - start_time).count();</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keyword">auto</span> step_duration = std::chrono::duration_cast&lt;std::chrono::seconds&gt;(current_time - last_report_time).count();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            progress = data_set.size();</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Generated &quot;</span> &lt;&lt; progress &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a> &lt;&lt; <span class="stringliteral">&quot; entries (&quot;</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                      &lt;&lt; (progress * 100 / gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a>) &lt;&lt; <span class="stringliteral">&quot;%) &quot;</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;Total time: &quot;</span> &lt;&lt; total_duration &lt;&lt; <span class="stringliteral">&quot;s, &quot;</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;Last &quot;</span> &lt;&lt; progress_step &lt;&lt; <span class="stringliteral">&quot; entries: &quot;</span> &lt;&lt; step_duration &lt;&lt; <span class="stringliteral">&quot;s&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            last_report_time = current_time;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="comment">// Print the total time it took to generate this dataset</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keyword">auto</span> end_time = std::chrono::high_resolution_clock::now();</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keyword">auto</span> total_duration = std::chrono::duration_cast&lt;std::chrono::seconds&gt;(end_time - start_time).count();</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;Dataset generation complete. Total entries: &quot;</span> &lt;&lt; data_set.size()</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot;, Total time: &quot;</span> &lt;&lt; total_duration &lt;&lt; <span class="stringliteral">&quot;s&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="comment">// Trim the dataset to the exact size we want and return it</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (data_set.size() &gt; gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a>) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        data_set.erase(data_set.begin() + gen_params.<a class="code" href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">datasetSize</a>, data_set.end());</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">return</span> data_set;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div>
<div class="ttc" id="adata__operations_8h_html_a124dab2ed7941f6ea9293d26064a0e39"><div class="ttname"><a href="data__operations_8h.html#a124dab2ed7941f6ea9293d26064a0e39">NUM_TAGS</a></div><div class="ttdeci">constexpr size_t NUM_TAGS</div><div class="ttdoc">@ brief Total number of TagIndex entries</div><div class="ttdef"><b>Definition:</b> data_operations.h:56</div></div>
<div class="ttc" id="adata__operations_8h_html_a1abdd0597aed91987f644bc76f259657a2f016347a7a9b442bd11158264f810f9"><div class="ttname"><a href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a2f016347a7a9b442bd11158264f810f9">BASE_PERTURBATION</a></div><div class="ttdeci">@ BASE_PERTURBATION</div><div class="ttdoc">Perturbation from base parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.h:64</div></div>
<div class="ttc" id="adata__operations_8h_html_a1abdd0597aed91987f644bc76f259657a3c54d663cec525a4311244f2e34399b9"><div class="ttname"><a href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a3c54d663cec525a4311244f2e34399b9">DISPLACEMENT</a></div><div class="ttdeci">@ DISPLACEMENT</div><div class="ttdoc">Displacement BC for perturbation.</div><div class="ttdef"><b>Definition:</b> data_operations.h:65</div></div>
<div class="ttc" id="adata__operations_8h_html_a1abdd0597aed91987f644bc76f259657a8db8a3d707eb71d99426d81ffb207e54"><div class="ttname"><a href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657a8db8a3d707eb71d99426d81ffb207e54">ROTATION</a></div><div class="ttdeci">@ ROTATION</div><div class="ttdoc">Rotation for each displacement BC.</div><div class="ttdef"><b>Definition:</b> data_operations.h:66</div></div>
<div class="ttc" id="adata__operations_8h_html_a1abdd0597aed91987f644bc76f259657aa7d623548e49a1514076f5bee3b314a4"><div class="ttname"><a href="data__operations_8h.html#a1abdd0597aed91987f644bc76f259657aa7d623548e49a1514076f5bee3b314a4">BASE</a></div><div class="ttdeci">@ BASE</div><div class="ttdoc">Base Parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.h:63</div></div>
<div class="ttc" id="anamespaceDataOperations_html_a64cd3643680cdedef8e9696f57fdf528"><div class="ttname"><a href="namespaceDataOperations.html#a64cd3643680cdedef8e9696f57fdf528">DataOperations::generateDisplacementBCs</a></div><div class="ttdeci">ParametrizationDataSet generateDisplacementBCs(MeshParametrizationData &amp;base_param, DisplacementParams &amp;params)</div><div class="ttdoc">Generates displacement boundary conditions for a parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:546</div></div>
<div class="ttc" id="anamespaceDataOperations_html_a728214b2b3f055905c5ddf6cba3e9df3"><div class="ttname"><a href="namespaceDataOperations.html#a728214b2b3f055905c5ddf6cba3e9df3">DataOperations::generateSingleBranchParametrization</a></div><div class="ttdeci">MeshParametrizationData generateSingleBranchParametrization(int num, double width, double length)</div><div class="ttdoc">Generates a single branch parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:646</div></div>
<div class="ttc" id="anamespaceDataOperations_html_aa89de93a8e7923d122feb9003b981469"><div class="ttname"><a href="namespaceDataOperations.html#aa89de93a8e7923d122feb9003b981469">DataOperations::generatePeturbedParametrizations</a></div><div class="ttdeci">std::vector&lt; MeshParametrizationData &gt; generatePeturbedParametrizations(MeshParametrizationData &amp;base_param, PerturbationParams &amp;perturb_params)</div><div class="ttdoc">Generates perturbed variations of a base parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:388</div></div>
<div class="ttc" id="anamespaceDataOperations_html_ab573a3ecdbe060d4a5b1a6b8d6d4c545"><div class="ttname"><a href="namespaceDataOperations.html#ab573a3ecdbe060d4a5b1a6b8d6d4c545">DataOperations::flipVectorEntry</a></div><div class="ttdeci">ParametrizationDataSet flipVectorEntry(ParametrizationEntry &amp;param_entry, std::pair&lt; double, int &gt; &amp;flip_params, std::mt19937 &amp;rng)</div><div class="ttdoc">Generates flipped variations of a parametrization entry.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:47</div></div>
<div class="ttc" id="anamespaceDataOperations_html_ac83786aa2f7e93613972c7fb0a171970"><div class="ttname"><a href="namespaceDataOperations.html#ac83786aa2f7e93613972c7fb0a171970">DataOperations::rotateParametrization</a></div><div class="ttdeci">std::vector&lt; MeshParametrizationData &gt; rotateParametrization(const MeshParametrizationData &amp;params, const std::pair&lt; double, double &gt; &amp;rotation_params, std::mt19937 &amp;rng)</div><div class="ttdoc">Generates rotated variations of a MeshParametrizationData object.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:164</div></div>
<div class="ttc" id="anamespaceDataOperations_html_ad852ba572234ef023dd0ccea7f279599"><div class="ttname"><a href="namespaceDataOperations.html#ad852ba572234ef023dd0ccea7f279599">DataOperations::generateMultiBranchParametrization</a></div><div class="ttdeci">MeshParametrizationData generateMultiBranchParametrization(int num, const Eigen::VectorXd &amp;widths, const Eigen::VectorXd &amp;lengths)</div><div class="ttdoc">Generates a multi-branch parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:668</div></div>
<div class="ttc" id="astructDisplacementParams_html"><div class="ttname"><a href="structDisplacementParams.html">DisplacementParams</a></div><div class="ttdoc">Parameters for generating displacement boundary conditions.</div><div class="ttdef"><b>Definition:</b> data_operations.h:440</div></div>
<div class="ttc" id="astructGenerationParams_html_a245be9c5723ba14e9fb3de9d65f50598"><div class="ttname"><a href="structGenerationParams.html#a245be9c5723ba14e9fb3de9d65f50598">GenerationParams::flipParams</a></div><div class="ttdeci">std::pair&lt; double, int &gt; flipParams</div><div class="ttdoc">Flip probability and linear scale factor.</div><div class="ttdef"><b>Definition:</b> data_operations.h:214</div></div>
<div class="ttc" id="astructGenerationParams_html_a2d86085e6b5a283b174653daf7e8e2b5"><div class="ttname"><a href="structGenerationParams.html#a2d86085e6b5a283b174653daf7e8e2b5">GenerationParams::dataRotationParams</a></div><div class="ttdeci">std::pair&lt; double, double &gt; dataRotationParams</div><div class="ttdoc">Rotation granularity and random proportion.</div><div class="ttdef"><b>Definition:</b> data_operations.h:215</div></div>
<div class="ttc" id="astructGenerationParams_html_a54ba1885af006660d1b8dcb8d1c57511"><div class="ttname"><a href="structGenerationParams.html#a54ba1885af006660d1b8dcb8d1c57511">GenerationParams::widthInterval</a></div><div class="ttdeci">std::pair&lt; double, double &gt; widthInterval</div><div class="ttdoc">Min/max width interval [min, max].</div><div class="ttdef"><b>Definition:</b> data_operations.h:213</div></div>
<div class="ttc" id="astructGenerationParams_html_a64f5cb04a7a7102752159e5cf4b7f200"><div class="ttname"><a href="structGenerationParams.html#a64f5cb04a7a7102752159e5cf4b7f200">GenerationParams::lengthInterval</a></div><div class="ttdeci">std::pair&lt; double, double &gt; lengthInterval</div><div class="ttdoc">Min/max length interval [min, max].</div><div class="ttdef"><b>Definition:</b> data_operations.h:212</div></div>
<div class="ttc" id="astructGenerationParams_html_a6b62cc852db31daab1e4d529bdac094b"><div class="ttname"><a href="structGenerationParams.html#a6b62cc852db31daab1e4d529bdac094b">GenerationParams::rng</a></div><div class="ttdeci">std::mt19937 rng</div><div class="ttdoc">Random number generator.</div><div class="ttdef"><b>Definition:</b> data_operations.h:230</div></div>
<div class="ttc" id="astructGenerationParams_html_a7a558b55a158aa9f479bc2a17861c08a"><div class="ttname"><a href="structGenerationParams.html#a7a558b55a158aa9f479bc2a17861c08a">GenerationParams::datasetSize</a></div><div class="ttdeci">int datasetSize</div><div class="ttdoc">Size of dataset to generate.</div><div class="ttdef"><b>Definition:</b> data_operations.h:210</div></div>
<div class="ttc" id="astructGenerationParams_html_afe31a30af2ae8df6b767d7d4e6b26956"><div class="ttname"><a href="structGenerationParams.html#afe31a30af2ae8df6b767d7d4e6b26956">GenerationParams::numBranches</a></div><div class="ttdeci">int numBranches</div><div class="ttdoc">Number of branches (must be 1 or &gt;= 3)</div><div class="ttdef"><b>Definition:</b> data_operations.h:211</div></div>
<div class="ttc" id="astructParametrizationEntry_html"><div class="ttname"><a href="structParametrizationEntry.html">ParametrizationEntry</a></div><div class="ttdoc">Container for a complete data entry containing MeshParametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.h:154</div></div>
<div class="ttc" id="astructPerturbationParams_html"><div class="ttname"><a href="structPerturbationParams.html">PerturbationParams</a></div><div class="ttdoc">Parameters for generating perturbations for the parametrizations.</div><div class="ttdef"><b>Definition:</b> data_operations.h:389</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa89de93a8e7923d122feb9003b981469"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa89de93a8e7923d122feb9003b981469">&#9670;&nbsp;</a></span>generatePeturbedParametrizations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &gt; DataOperations::generatePeturbedParametrizations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;&#160;</td>
          <td class="paramname"><em>base_param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPerturbationParams.html">PerturbationParams</a> &amp;&#160;</td>
          <td class="paramname"><em>perturb_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates perturbed variations of a base parametrization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base_param</td><td>Base parametrization </td></tr>
    <tr><td class="paramname">perturb_params</td><td>Perturbation parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of perturbed parametrizations </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structPerturbationParams.html" title="Parameters for generating perturbations for the parametrizations.">PerturbationParams</a> for parameters used </dd></dl>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                            {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    std::vector&lt;MeshParametrizationData&gt; perturbed_vector;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// If the current parametrization is invalid, we return the empty vector in order to generate a new one</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceMeshParametrization.html#a04f329e14a41574a8b4a5a8eafd152e2">MeshParametrization::meshParamValidator</a>(base_param)) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> perturbed_vector;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    perturbed_vector.emplace_back(base_param);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    std::uniform_real_distribution&lt;double&gt; uniform (-1, 1);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// We perturb the parametrization for the 1-branch case</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a> == 1) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="comment">// Initialize the heuristic parameters to perturb this branch</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordtype">double</span> approx_length = (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(1) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(0)).norm() +</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                                (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(2) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(1)).norm();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        Eigen::Vector2d direction = (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(2) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.col(0)).normalized();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordtype">double</span> start_dot = std::abs(base_param.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.col(0).dot(direction));</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordtype">double</span> end_dot = std::abs(base_param.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.col(2).dot(direction));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordtype">double</span> curvature = (start_dot + end_dot) / 2.0;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordtype">double</span> length_factor = std::min(approx_length / perturb_params.<a class="code" href="structPerturbationParams.html#a337434b1b4d6917b65162d78592556b5">vector_perturb</a>.second, 2.0);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordtype">double</span> max_angle = perturb_params.<a class="code" href="structPerturbationParams.html#a337434b1b4d6917b65162d78592556b5">vector_perturb</a>.first * length_factor *</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            (1 - curvature / 2.0);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordtype">double</span> max_width = std::min(perturb_params.<a class="code" href="structPerturbationParams.html#ab77523ba015adf490ed38f0332a6e963">width_perturb</a>.first * base_param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>.mean(),</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            perturb_params.<a class="code" href="structPerturbationParams.html#ab77523ba015adf490ed38f0332a6e963">width_perturb</a>.second * approx_length);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordtype">double</span> max_terminal = std::min(perturb_params.<a class="code" href="structPerturbationParams.html#af489f94ae5d2d0e9daebabb2899132c6">terminal_perturb</a>.first * base_param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>.mean(),</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            perturb_params.<a class="code" href="structPerturbationParams.html#af489f94ae5d2d0e9daebabb2899132c6">terminal_perturb</a>.second * approx_length);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">while</span> (perturbed_vector.size() &lt; perturb_params.<a class="code" href="structPerturbationParams.html#aedca50ae460ae2ee3813800e9fc3db84">numPerturbations</a>) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <a class="code" href="structMeshParametrizationData.html">MeshParametrizationData</a> new_param {base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>, base_param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>, base_param.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>};</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="comment">// Perturb each &quot;parameter&quot; with probability displaceProbability</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="comment">// perturb the width</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <span class="keywordflow">if</span> (uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) &lt;= perturb_params.<a class="code" href="structPerturbationParams.html#a5f424f267c90348b9b4b22558e84b14a">perturbProbability</a>) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    new_param.widths(i) += uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) * max_width;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                <span class="comment">// perturb the terminal</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                <span class="keywordflow">if</span> (uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) &lt;= perturb_params.<a class="code" href="structPerturbationParams.html#a5f424f267c90348b9b4b22558e84b14a">perturbProbability</a>) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    new_param.terminals(0, i) += uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) * max_terminal;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    new_param.terminals(1, i) += uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) * max_terminal;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="comment">// perturb the vector</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">if</span> (uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) &lt;= perturb_params.<a class="code" href="structPerturbationParams.html#a5f424f267c90348b9b4b22558e84b14a">perturbProbability</a>) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    <span class="keywordtype">double</span> angle = uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) * max_angle;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    Eigen::Vector2d origin = Eigen::Vector2d::Zero();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    new_param.vectors.col(i) = <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(new_param.vectors.col(i), origin, angle);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespaceMeshParametrization.html#a04f329e14a41574a8b4a5a8eafd152e2">MeshParametrization::meshParamValidator</a>(new_param)) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                perturbed_vector.emplace_back(new_param);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                count = 0;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            count++;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">if</span> (count &gt; 50) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <span class="keywordflow">return</span> perturbed_vector;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">// Center these perturbed vectors and return them</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classGraphMesh.html#a6a7f1768822a8f276a5779d0bed22a38">GraphMesh::centerMeshParametrizations</a>(perturbed_vector);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// Initialize vector of approximate lengths of branches</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    std::vector&lt;double&gt; approx_lengths(base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; i++) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        approx_lengths[i] = (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 1) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 0)).norm() +</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                                (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 2) - base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 1)).norm();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// Initialize vector of curvatures per branch</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    std::vector&lt;double&gt; curvatures(base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; i++) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        Eigen::Vector2d direction = (base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 2) -</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * i, 0)).normalized();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordtype">double</span> start_dot = std::abs(base_param.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.block&lt;2, 1&gt;(2 * i, 0).dot(direction));</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordtype">double</span> end_dot = std::abs(base_param.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.block&lt;2, 1&gt;(2 * i, 2).dot(direction));</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        curvatures[i] = (start_dot + end_dot) / 2.0;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// Initialize vector of maximum angle changes per branch</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    std::vector&lt;double&gt; max_angles(base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; i++) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordtype">double</span> length_factor = std::min(approx_lengths[i] / perturb_params.<a class="code" href="structPerturbationParams.html#a337434b1b4d6917b65162d78592556b5">vector_perturb</a>.second, 2.0);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        max_angles[i] = perturb_params.<a class="code" href="structPerturbationParams.html#a337434b1b4d6917b65162d78592556b5">vector_perturb</a>.first * length_factor *</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        (1 - curvatures[i] / 2.0);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// Initialize vector of maximum width changes per branch</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    std::vector&lt;double&gt; max_widths(base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; i++) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        max_widths[i] = std::min(perturb_params.<a class="code" href="structPerturbationParams.html#ab77523ba015adf490ed38f0332a6e963">width_perturb</a>.first * base_param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>.row(i).mean(),</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                perturb_params.<a class="code" href="structPerturbationParams.html#ab77523ba015adf490ed38f0332a6e963">width_perturb</a>.second * approx_lengths[i]);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// Initialize vector of maximum terminal changes per branch</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    std::vector&lt;double&gt; max_terminals(base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; i++) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        max_terminals[i] = std::min(perturb_params.<a class="code" href="structPerturbationParams.html#af489f94ae5d2d0e9daebabb2899132c6">terminal_perturb</a>.first * base_param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>.row(i).mean(),</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            perturb_params.<a class="code" href="structPerturbationParams.html#af489f94ae5d2d0e9daebabb2899132c6">terminal_perturb</a>.second * approx_lengths[i]);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// We perturb the parametization in the 3+ branch case, ensuring that the width, terminal, and vector positions</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// for the first &quot;columns&quot; always remain the same due to the constraints at the center</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">while</span> (perturbed_vector.size() &lt; perturb_params.<a class="code" href="structPerturbationParams.html#aedca50ae460ae2ee3813800e9fc3db84">numPerturbations</a>) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <a class="code" href="structMeshParametrizationData.html">MeshParametrizationData</a> new_param {base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>, base_param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>,</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                        base_param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>, base_param.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>};</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="comment">// Perturb each &quot;parameter&quot; with probability displaceProbability for each branch</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; base_param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; ++i) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="comment">// Skip over the first column, due to geometric constraints on the center</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1; j &lt; 3; ++j) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <span class="comment">// perturb the width</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <span class="keywordflow">if</span> (uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) &lt;= perturb_params.<a class="code" href="structPerturbationParams.html#a5f424f267c90348b9b4b22558e84b14a">perturbProbability</a>) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    new_param.widths(i, j) += uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) * max_widths[i];</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <span class="comment">// perturb the terminal</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="keywordflow">if</span> (uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) &lt;= perturb_params.<a class="code" href="structPerturbationParams.html#a5f424f267c90348b9b4b22558e84b14a">perturbProbability</a>) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                    new_param.terminals(2 * i, j) += uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) * max_terminals[i];</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    new_param.terminals(2 * i + 1, j) += uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) * max_terminals[i];</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                <span class="comment">// perturb the vector</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <span class="keywordflow">if</span> (uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) &lt;= perturb_params.<a class="code" href="structPerturbationParams.html#a5f424f267c90348b9b4b22558e84b14a">perturbProbability</a>) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    <span class="keywordtype">double</span> angle = uniform(perturb_params.<a class="code" href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">rng</a>) * max_angles[i];</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    Eigen::Vector2d origin = Eigen::Vector2d::Zero();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    new_param.vectors.block(2 * i, j, 2, 1) = <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                        new_param.vectors.block(2 * i, j, 2, 1), origin, angle);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceMeshParametrization.html#a04f329e14a41574a8b4a5a8eafd152e2">MeshParametrization::meshParamValidator</a>(new_param)) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            perturbed_vector.emplace_back(new_param);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            count = 0;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        count++;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">if</span> (count &gt; 50) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">return</span> perturbed_vector;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classGraphMesh.html#a6a7f1768822a8f276a5779d0bed22a38">GraphMesh::centerMeshParametrizations</a>(perturbed_vector);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="ttc" id="aclassGraphMesh_html_a6a7f1768822a8f276a5779d0bed22a38"><div class="ttname"><a href="classGraphMesh.html#a6a7f1768822a8f276a5779d0bed22a38">GraphMesh::centerMeshParametrizations</a></div><div class="ttdeci">static std::vector&lt; MeshParametrizationData &gt; centerMeshParametrizations(const std::vector&lt; MeshParametrizationData &gt; &amp;param_vector)</div><div class="ttdoc">Centers parametrizations of type MeshParametrizationData.</div><div class="ttdef"><b>Definition:</b> graph_mesh.cc:659</div></div>
<div class="ttc" id="anamespaceDataOperations_html_a27523c442a94bea27ec8411e1e1499af"><div class="ttname"><a href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">DataOperations::rotatePoint</a></div><div class="ttdeci">Eigen::Vector2d rotatePoint(const Eigen::Vector2d &amp;point, const Eigen::Vector2d &amp;reference, double angle_degrees)</div><div class="ttdoc">Rotates a 2D point around a reference point *.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:118</div></div>
<div class="ttc" id="astructPerturbationParams_html_a337434b1b4d6917b65162d78592556b5"><div class="ttname"><a href="structPerturbationParams.html#a337434b1b4d6917b65162d78592556b5">PerturbationParams::vector_perturb</a></div><div class="ttdeci">std::pair&lt; double, double &gt; vector_perturb</div><div class="ttdoc">(max angle change in degrees, reference branch length)</div><div class="ttdef"><b>Definition:</b> data_operations.h:393</div></div>
<div class="ttc" id="astructPerturbationParams_html_a5f424f267c90348b9b4b22558e84b14a"><div class="ttname"><a href="structPerturbationParams.html#a5f424f267c90348b9b4b22558e84b14a">PerturbationParams::perturbProbability</a></div><div class="ttdeci">double perturbProbability</div><div class="ttdoc">Probability of applying perturbation [0,1].</div><div class="ttdef"><b>Definition:</b> data_operations.h:391</div></div>
<div class="ttc" id="astructPerturbationParams_html_ab77523ba015adf490ed38f0332a6e963"><div class="ttname"><a href="structPerturbationParams.html#ab77523ba015adf490ed38f0332a6e963">PerturbationParams::width_perturb</a></div><div class="ttdeci">std::pair&lt; double, double &gt; width_perturb</div><div class="ttdoc">(% current width, % length)</div><div class="ttdef"><b>Definition:</b> data_operations.h:392</div></div>
<div class="ttc" id="astructPerturbationParams_html_aedca50ae460ae2ee3813800e9fc3db84"><div class="ttname"><a href="structPerturbationParams.html#aedca50ae460ae2ee3813800e9fc3db84">PerturbationParams::numPerturbations</a></div><div class="ttdeci">int numPerturbations</div><div class="ttdoc">Number of perturbations to generate.</div><div class="ttdef"><b>Definition:</b> data_operations.h:390</div></div>
<div class="ttc" id="astructPerturbationParams_html_af489f94ae5d2d0e9daebabb2899132c6"><div class="ttname"><a href="structPerturbationParams.html#af489f94ae5d2d0e9daebabb2899132c6">PerturbationParams::terminal_perturb</a></div><div class="ttdeci">std::pair&lt; double, double &gt; terminal_perturb</div><div class="ttdoc">(% branch length, % width)</div><div class="ttdef"><b>Definition:</b> data_operations.h:394</div></div>
<div class="ttc" id="astructPerturbationParams_html_afc3cfc08607f387d8ffa0f108ad7fefa"><div class="ttname"><a href="structPerturbationParams.html#afc3cfc08607f387d8ffa0f108ad7fefa">PerturbationParams::rng</a></div><div class="ttdeci">std::mt19937 &amp; rng</div><div class="ttdoc">Reference to random number generator from GenerationParams.</div><div class="ttdef"><b>Definition:</b> data_operations.h:395</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a008bad02f9fea01df05e471448de212d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a008bad02f9fea01df05e471448de212d">&#9670;&nbsp;</a></span>generateRotationAngles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; double &gt; DataOperations::generateRotationAngles </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>rotation_granularity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>random_proportion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::mt19937 &amp;&#160;</td>
          <td class="paramname"><em>rng</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates angles for rotating parametrizations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rotation_granularity</td><td>Base rotation angle increment </td></tr>
    <tr><td class="paramname">random_proportion</td><td>Random perturbation factor for angles </td></tr>
    <tr><td class="paramname">rng</td><td>Random number generator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of rotation angles in degrees </dd></dl>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                                                                                                               {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// Declare vector that will store all angles and calculate number of rotations</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    std::vector&lt;double&gt; angles;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">int</span> num_rotations = std::ceil(360.0 / rotation_granularity);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Uniform rotations, note that this also includes a &quot;no-rotation&quot; parametrization</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_rotations; ++i) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        angles.push_back(i * rotation_granularity);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    std::uniform_real_distribution&lt;&gt; dis(0, 360);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// Initialize number of desired random rotations, generate random samples, and add to these to the return vector</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">int</span> num_random = int(num_rotations * random_proportion);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_random; ++i) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        angles.push_back(dis(rng));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> angles;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a728214b2b3f055905c5ddf6cba3e9df3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a728214b2b3f055905c5ddf6cba3e9df3">&#9670;&nbsp;</a></span>generateSingleBranchParametrization()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> DataOperations::generateSingleBranchParametrization </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a single branch parametrization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>number of branches </td></tr>
    <tr><td class="paramname">width</td><td>Width of the branch </td></tr>
    <tr><td class="paramname">length</td><td>Length of the branch </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Mesh parametrization for single branch </dd></dl>
<div class="fragment"><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                                                                                                {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    LF_ASSERT_MSG(width &gt; 1e-5 and length &gt; 1e-5, <span class="stringliteral">&quot;Width and length are not valid in &quot;</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="stringliteral">&quot;generateSingleBranchParametrization, width: &quot;</span> &lt;&lt; width &lt;&lt; <span class="stringliteral">&quot; and length: &quot;</span> &lt;&lt; length);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    LF_ASSERT_MSG(num == 1, <span class="stringliteral">&quot;Incorrect number of branches sent to generateSingleBranchParametrization, &quot;</span> &lt;&lt; num);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">// Declare necessary matrices to initialize a parametrization</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    Eigen::MatrixXd widths(1, 3);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    Eigen::MatrixXd terminals(2, 3);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    Eigen::MatrixXd vectors (2, 3);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// Initialize necessary matrices with a non-varying width, length exactly as expected, and all vectors pointing up</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    widths &lt;&lt; width, width, width;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    terminals &lt;&lt; -length / 2, 0.0, length / 2, 0.0, 0.0, 0.0;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    vectors &lt;&lt; 0.0, 0.0, 0.0, 1.0, 1.0, 1.0;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">// Return the MeshParametrization Data we want</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">return</span> {num, widths, terminals, vectors};</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0f31af133e7d20282f04e1a2398b8fd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f31af133e7d20282f04e1a2398b8fd1">&#9670;&nbsp;</a></span>loadDataSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="data__operations_8h.html#a6a3a07638e11f8b744844f1933ff0f0c">DataSet</a> DataOperations::loadDataSet </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>file_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a dataset from a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td>Input file path (automatically loads the data from the data folder of the repo, no .bin extension needed) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Loaded dataset </dd></dl>
<div class="fragment"><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                                              {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="comment">// Find the path to where we want to save the data set</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    std::filesystem::path project_root = std::filesystem::current_path().parent_path();</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    std::filesystem::path data_dir = project_root / <span class="stringliteral">&quot;data&quot;</span>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    std::filesystem::path full_path = data_dir / (file_name + <span class="stringliteral">&quot;.bin&quot;</span>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    std::ifstream file(full_path, std::ios::binary);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">if</span> (!file) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Unable to open file for reading within loadDataSet: &quot;</span> + file_name);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">// Read the type of this data set so that we know how to read it</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="data__operations_8h.html#af2c97594368140448d6073600d580966">DataSetType</a> type;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;type), <span class="keyword">sizeof</span>(<a class="code" href="data__operations_8h.html#af2c97594368140448d6073600d580966">DataSetType</a>));</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">if</span> (type == <a class="code" href="data__operations_8h.html#af2c97594368140448d6073600d580966a5b4c98f468897576d1de2cd5ec208689">DataSetType::Parametrization</a>) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="comment">// Obtain the size of this data set</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> data_set;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordtype">size_t</span> size;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;size), <span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>));</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="comment">// Iterate through all entries given the size we just acquired, and load each field of the entry</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i= 0; i &lt; size; i++) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="keywordtype">int</span> num_branches;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="keywordflow">if</span> (!file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;num_branches), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)))</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to read num_branches&quot;</span>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <a class="code" href="structMeshParametrizationData.html">MeshParametrizationData</a> param = <a class="code" href="namespaceDataOperations.html#a43e0dfb86f9e053b13da2df705508be0">loadMeshParametrizationData</a>(file);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordtype">int</span> num_cols = num_branches == 1 ? 2 : 1;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            Eigen::MatrixXd displacements(4 * num_branches, num_cols);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="keywordflow">if</span> (!file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(displacements.data()), 4 * num_branches * num_cols * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>))) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to read displacement data&quot;</span>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            };</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordtype">double</span> energy_diff;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <span class="keywordflow">if</span> (!file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;energy_diff), <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)))</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to read energy_diff&quot;</span>);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <a class="code" href="structParametrizationEntry.html">ParametrizationEntry</a> entry(num_branches, std::move(param), std::move(displacements), energy_diff);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            <span class="keywordflow">if</span> (!file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(entry.tags.data()), <a class="code" href="data__operations_8h.html#a124dab2ed7941f6ea9293d26064a0e39">NUM_TAGS</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)))</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Failed to read tags&quot;</span>);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            data_set.push_back(entry);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">return</span> data_set;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="comment">// Obtain the size of this data set</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="data__operations_8h.html#a0594e31d7c25e933185cba6910c841c1">PointDataSet</a> data_set;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordtype">size_t</span> size;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;size), <span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>));</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// Iterate through all entries given the size we just acquired</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i= 0; i &lt; size; i++) {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="keywordtype">int</span> num_branches;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;num_branches), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <a class="code" href="structParametrizationPoints.html">ParametrizationPoints</a> points = <a class="code" href="namespaceDataOperations.html#af1007d706df9b1ec0242b8c0e451e083">loadParametrizationPoints</a>(file);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordtype">int</span> num_cols = num_branches == 1 ? 2 : 1;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        Eigen::MatrixXd displacements(4 * num_branches, num_cols);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(displacements.data()), 4 * num_branches * num_cols * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordtype">double</span> energy_diff;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;energy_diff), <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        std::vector&lt;int&gt; tags(<a class="code" href="data__operations_8h.html#a124dab2ed7941f6ea9293d26064a0e39">NUM_TAGS</a>);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(tags.data()), <a class="code" href="data__operations_8h.html#a124dab2ed7941f6ea9293d26064a0e39">NUM_TAGS</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <a class="code" href="structPointEntry.html">PointEntry</a> entry(num_branches, std::move(points), std::move(displacements), energy_diff, tags);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        data_set.push_back(std::move(entry));</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">return</span> data_set;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;}</div>
<div class="ttc" id="adata__operations_8h_html_a0594e31d7c25e933185cba6910c841c1"><div class="ttname"><a href="data__operations_8h.html#a0594e31d7c25e933185cba6910c841c1">PointDataSet</a></div><div class="ttdeci">std::vector&lt; PointEntry &gt; PointDataSet</div><div class="ttdoc">Type alias for a collection of point entries.</div><div class="ttdef"><b>Definition:</b> data_operations.h:184</div></div>
<div class="ttc" id="adata__operations_8h_html_af2c97594368140448d6073600d580966"><div class="ttname"><a href="data__operations_8h.html#af2c97594368140448d6073600d580966">DataSetType</a></div><div class="ttdeci">DataSetType</div><div class="ttdoc">Enumeration for dataset type identification in binary storage.</div><div class="ttdef"><b>Definition:</b> data_operations.h:190</div></div>
<div class="ttc" id="adata__operations_8h_html_af2c97594368140448d6073600d580966a5b4c98f468897576d1de2cd5ec208689"><div class="ttname"><a href="data__operations_8h.html#af2c97594368140448d6073600d580966a5b4c98f468897576d1de2cd5ec208689">DataSetType::Parametrization</a></div><div class="ttdeci">@ Parametrization</div><div class="ttdoc">Dataset contains entries of type ParametrizationEntry.</div></div>
<div class="ttc" id="anamespaceDataOperations_html_a43e0dfb86f9e053b13da2df705508be0"><div class="ttname"><a href="namespaceDataOperations.html#a43e0dfb86f9e053b13da2df705508be0">DataOperations::loadMeshParametrizationData</a></div><div class="ttdeci">MeshParametrizationData loadMeshParametrizationData(std::ifstream &amp;file)</div><div class="ttdoc">Loads a MeshParametrizationData object from a binary file.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:910</div></div>
<div class="ttc" id="anamespaceDataOperations_html_af1007d706df9b1ec0242b8c0e451e083"><div class="ttname"><a href="namespaceDataOperations.html#af1007d706df9b1ec0242b8c0e451e083">DataOperations::loadParametrizationPoints</a></div><div class="ttdeci">ParametrizationPoints loadParametrizationPoints(std::ifstream &amp;file)</div><div class="ttdoc">Loads a ParametrizationPoints object from a binary file.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:938</div></div>
<div class="ttc" id="astructParametrizationPoints_html"><div class="ttname"><a href="structParametrizationPoints.html">ParametrizationPoints</a></div><div class="ttdoc">Container for parametrization of type points.</div><div class="ttdef"><b>Definition:</b> data_operations.h:87</div></div>
<div class="ttc" id="astructPointEntry_html"><div class="ttname"><a href="structPointEntry.html">PointEntry</a></div><div class="ttdoc">Container for a complete data entry containing ParametrizationPoints.</div><div class="ttdef"><b>Definition:</b> data_operations.h:123</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43e0dfb86f9e053b13da2df705508be0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43e0dfb86f9e053b13da2df705508be0">&#9670;&nbsp;</a></span>loadMeshParametrizationData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> DataOperations::loadMeshParametrizationData </td>
          <td>(</td>
          <td class="paramtype">std::ifstream &amp;&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> object from a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>Input file stream </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Loaded mesh parametrization </dd></dl>
<div class="fragment"><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">int</span> numBranches;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;numBranches), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    Eigen::MatrixXd widths(numBranches, 3);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(widths.data()), 3 * numBranches * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="comment">// Load the points into the matrix</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    Eigen::MatrixXd terminals(2 * numBranches, 3);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(terminals.data()), 6 * numBranches * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment">// Load the points into the matrix</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    Eigen::MatrixXd vectors(2 * numBranches, 3);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(vectors.data()), 6 * numBranches * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> {numBranches, widths, terminals, vectors};</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af1007d706df9b1ec0242b8c0e451e083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1007d706df9b1ec0242b8c0e451e083">&#9670;&nbsp;</a></span>loadParametrizationPoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> DataOperations::loadParametrizationPoints </td>
          <td>(</td>
          <td class="paramtype">std::ifstream &amp;&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> object from a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>Input file stream </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Loaded parametrization points </dd></dl>
<div class="fragment"><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordtype">int</span> numBranches;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;numBranches), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">// Load the points into the matrix</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    Eigen::MatrixXd points(4 * numBranches, 3);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    file.read(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(points.data()), 12 * numBranches * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">return</span> {numBranches, std::move(points)};</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0918c3d7ed909a9613b34d36f6f44d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0918c3d7ed909a9613b34d36f6f44d2">&#9670;&nbsp;</a></span>multiBranchDisplacements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::MatrixXd DataOperations::multiBranchDisplacements </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDisplacementGenerators.html">DisplacementGenerators</a> &amp;&#160;</td>
          <td class="paramname"><em>param_gens</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates displacement boundary conditions for a multi-branch parametrization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Number of branches </td></tr>
    <tr><td class="paramname">param_gens</td><td>Displacement generation parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Matrix of displacement vectors </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structDisplacementGenerators.html" title="Random number generators for multi-branch displacement BCs.">DisplacementGenerators</a> for parameters used </dd></dl>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                                                                                  {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    LF_ASSERT_MSG(param_gens.<a class="code" href="structDisplacementGenerators.html#aacb7db94bf3bcf9a1b9c60aba4b8005e">maxDistances</a>.size() == num, <span class="stringliteral">&quot;Vector of maxDistances and num given to &quot;</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="stringliteral">&quot;multiBranchDisplacements incorrect, num = &quot;</span> &lt;&lt; num &lt;&lt; <span class="stringliteral">&quot;, and size is &quot;</span> &lt;&lt; param_gens.<a class="code" href="structDisplacementGenerators.html#aacb7db94bf3bcf9a1b9c60aba4b8005e">maxDistances</a>.size() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// Declare matrix that will hold our displacement vectors</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    Eigen::MatrixXd displacements(num * 4, 1);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    displacements.setZero();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// Iterate through all branches to add displacement boundary conditions one at a time</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num; ++i) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="comment">// Iterate through the 2 points for which we&#39;ll have displacement BCs (4 total with 2D x and y)</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; ++j) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="comment">// There can only be displacement BCs at the ends of each branch, the remaining sides have Neumann BCs</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="comment">// Add a displacement boundary condition with probability displaceProbability for each coordinate</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">if</span> (param_gens.<a class="code" href="structDisplacementGenerators.html#a9d922eb8173904416ab6ee26b8d86fcc">uniformPerturb</a>(param_gens.<a class="code" href="structDisplacementGenerators.html#a0566b22f25ff3d937ae1e09a41b21ac2">rng</a>) &lt; param_gens.<a class="code" href="structDisplacementGenerators.html#a1d053a9009704d870b70631bf9d329e4">displacementProbability</a>) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                displacements(4 * i + j, 0) += param_gens.<a class="code" href="structDisplacementGenerators.html#a305b53ae818b9979643c6bc9b1258c3f">displacementPerturb</a>(param_gens.<a class="code" href="structDisplacementGenerators.html#a0566b22f25ff3d937ae1e09a41b21ac2">rng</a>)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                           * param_gens.<a class="code" href="structDisplacementGenerators.html#aacb7db94bf3bcf9a1b9c60aba4b8005e">maxDistances</a>[i];</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span> displacements;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div>
<div class="ttc" id="astructDisplacementGenerators_html_a0566b22f25ff3d937ae1e09a41b21ac2"><div class="ttname"><a href="structDisplacementGenerators.html#a0566b22f25ff3d937ae1e09a41b21ac2">DisplacementGenerators::rng</a></div><div class="ttdeci">std::mt19937 &amp; rng</div><div class="ttdoc">Reference to random number generator.</div><div class="ttdef"><b>Definition:</b> data_operations.h:501</div></div>
<div class="ttc" id="astructDisplacementGenerators_html_a1d053a9009704d870b70631bf9d329e4"><div class="ttname"><a href="structDisplacementGenerators.html#a1d053a9009704d870b70631bf9d329e4">DisplacementGenerators::displacementProbability</a></div><div class="ttdeci">double displacementProbability</div><div class="ttdoc">Probability of applying displacement.</div><div class="ttdef"><b>Definition:</b> data_operations.h:499</div></div>
<div class="ttc" id="astructDisplacementGenerators_html_a305b53ae818b9979643c6bc9b1258c3f"><div class="ttname"><a href="structDisplacementGenerators.html#a305b53ae818b9979643c6bc9b1258c3f">DisplacementGenerators::displacementPerturb</a></div><div class="ttdeci">std::normal_distribution displacementPerturb</div><div class="ttdoc">Normal distribution for perturbations.</div><div class="ttdef"><b>Definition:</b> data_operations.h:503</div></div>
<div class="ttc" id="astructDisplacementGenerators_html_a9d922eb8173904416ab6ee26b8d86fcc"><div class="ttname"><a href="structDisplacementGenerators.html#a9d922eb8173904416ab6ee26b8d86fcc">DisplacementGenerators::uniformPerturb</a></div><div class="ttdeci">std::uniform_real_distribution uniformPerturb</div><div class="ttdoc">Uniform distribution [0,1].</div><div class="ttdef"><b>Definition:</b> data_operations.h:502</div></div>
<div class="ttc" id="astructDisplacementGenerators_html_aacb7db94bf3bcf9a1b9c60aba4b8005e"><div class="ttname"><a href="structDisplacementGenerators.html#aacb7db94bf3bcf9a1b9c60aba4b8005e">DisplacementGenerators::maxDistances</a></div><div class="ttdeci">std::vector&lt; double &gt; maxDistances</div><div class="ttdoc">Maximum displacement per branch.</div><div class="ttdef"><b>Definition:</b> data_operations.h:500</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2301cb80271dc293823b47300057412"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2301cb80271dc293823b47300057412">&#9670;&nbsp;</a></span>numberToBoolVector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; bool &gt; DataOperations::numberToBoolVector </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an unsigned integer to a boolean vector, with 1st index being the ones place. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number</td><td>Number to convert </td></tr>
    <tr><td class="paramname">bits</td><td>Number of bits in the output vector </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of booleans representing the binary form of number </dd></dl>
<div class="fragment"><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                                                                                {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    std::vector&lt;bool&gt; result(bits);</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bits; ++i) {</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        result[i] = (number &amp; (1 &lt;&lt; i)) != 0;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    }</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c39a2013ae3af6acd461f89c2115687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c39a2013ae3af6acd461f89c2115687">&#9670;&nbsp;</a></span>parametrizationToPoint() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> &gt; DataOperations::parametrizationToPoint </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>param_vector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts vector of <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> objects to a vector of <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> objects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_vector</td><td>Vector of mesh parametrizations </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of point representations </dd></dl>
<div class="fragment"><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                                                            {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    std::vector&lt;ParametrizationPoints&gt; points_vector;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structMeshParametrizationData.html">MeshParametrizationData</a> param : param_vector) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="structParametrizationPoints.html">ParametrizationPoints</a> points {param.<a class="code" href="structParametrizationPoints.html#a06e8568d929def54095413eb2d60a047">numBranches</a>, <a class="code" href="namespaceMeshParametrization.html#a7e2be81d0d3a5153798423ce3a58e3a1">MeshParametrization::polynomialPoints</a>(param)};</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        points_vector.emplace_back(points);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> points_vector;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;}</div>
<div class="ttc" id="anamespaceMeshParametrization_html_a7e2be81d0d3a5153798423ce3a58e3a1"><div class="ttname"><a href="namespaceMeshParametrization.html#a7e2be81d0d3a5153798423ce3a58e3a1">MeshParametrization::polynomialPoints</a></div><div class="ttdeci">Eigen::MatrixXd polynomialPoints(MeshParametrizationData &amp;param)</div><div class="ttdoc">Generates polynomial points from parametrization.</div><div class="ttdef"><b>Definition:</b> mesh_parametrization.cc:53</div></div>
<div class="ttc" id="astructParametrizationPoints_html_a06e8568d929def54095413eb2d60a047"><div class="ttname"><a href="structParametrizationPoints.html#a06e8568d929def54095413eb2d60a047">ParametrizationPoints::numBranches</a></div><div class="ttdeci">int numBranches</div><div class="ttdoc">Number of branches in the parametrization(1, 3+)</div><div class="ttdef"><b>Definition:</b> data_operations.h:88</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e882411963c7de27766e4f4d1053328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e882411963c7de27766e4f4d1053328">&#9670;&nbsp;</a></span>parametrizationToPoint() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="data__operations_8h.html#a0594e31d7c25e933185cba6910c841c1">PointDataSet</a> DataOperations::parametrizationToPoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> &amp;&#160;</td>
          <td class="paramname"><em>param_dataset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a parametrization dataset containing <a class="el" href="structParametrizationEntry.html">ParametrizationEntry</a> objects to a dataset containing <a class="el" href="structPointEntry.html">PointEntry</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_dataset</td><td>Original parametrization dataset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Dataset in point representation </dd></dl>
<div class="fragment"><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                                                                                         {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="data__operations_8h.html#a0594e31d7c25e933185cba6910c841c1">PointDataSet</a> point_data_set;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    point_data_set.reserve(param_dataset.size());</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    std::unordered_map&lt;std::vector&lt;int&gt;, bool, <a class="code" href="structVectorHash.html">VectorHash</a>&gt; seen_tags;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">// Iterate through all entries in the initial dataset</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structParametrizationEntry.html">ParametrizationEntry</a> param_entry: param_dataset) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="comment">// If we can&#39;t find this tag within our set, we can add this entry, since it is &quot;unique&quot;</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="keywordflow">if</span> (!seen_tags.contains(param_entry.tags)) {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="comment">// Use polynomialPoints to convert each parametrization correctly then add to the data set</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <a class="code" href="structParametrizationPoints.html">ParametrizationPoints</a> points{param_entry.<a class="code" href="structParametrizationPoints.html#a06e8568d929def54095413eb2d60a047">numBranches</a>,</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                                          <a class="code" href="namespaceMeshParametrization.html#a7e2be81d0d3a5153798423ce3a58e3a1">MeshParametrization::polynomialPoints</a>(param_entry.param)};</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            point_data_set.emplace_back(param_entry.numBranches, points,</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                                  param_entry.displacements, param_entry.energyDifference, param_entry.tags);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="comment">// Add this tag to our set of seen tags since this is new</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            seen_tags[param_entry.tags] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">return</span> point_data_set;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div>
<div class="ttc" id="astructVectorHash_html"><div class="ttname"><a href="structVectorHash.html">VectorHash</a></div><div class="ttdoc">Hash functor for vectors of integers.</div><div class="ttdef"><b>Definition:</b> data_operations.h:39</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac83786aa2f7e93613972c7fb0a171970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac83786aa2f7e93613972c7fb0a171970">&#9670;&nbsp;</a></span>rotateParametrization() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &gt; DataOperations::rotateParametrization </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::pair&lt; double, double &gt; &amp;&#160;</td>
          <td class="paramname"><em>rotation_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::mt19937 &amp;&#160;</td>
          <td class="paramname"><em>rng</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates rotated variations of a <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>Original mesh parametrization </td></tr>
    <tr><td class="paramname">rotation_params</td><td>Pair of (rotation granularity, random proportion) </td></tr>
    <tr><td class="paramname">rng</td><td>Random number generator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of rotated mesh parametrizations </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af" title="Rotates a 2D point around a reference point *.">rotatePoint</a> for rotation of individual points </dd></dl>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                                                     {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    std::vector&lt;MeshParametrizationData&gt; rotated_data_set;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// Initialize angles vector and the center points for which to rotate from</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    std::vector&lt;double&gt; angles = <a class="code" href="namespaceDataOperations.html#a008bad02f9fea01df05e471448de212d">generateRotationAngles</a>(rotation_params.first, rotation_params.second, rng);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    Eigen::Vector2d center = <a class="code" href="namespaceDataOperations.html#ab08b3135bf6da6012a8c83633d9e4b73">findCenter</a>(params);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    Eigen::Vector2d origin = Eigen::Vector2d::Zero(); <span class="comment">// for the vectors</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// Iterate through all angles and rotate the param according to that angle</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">double</span> angle : angles) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        Eigen::MatrixXd rotated_terminals (params.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.rows(), params.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.cols());</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        Eigen::MatrixXd rotated_vectors (params.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.rows(), params.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.cols());</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        rotated_terminals.setZero();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        rotated_vectors.setZero();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">// Iterate through all branches and rotate each terminal and vector of that branch</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; params.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>; ++j) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            rotated_terminals.block&lt;2, 1&gt;(2 * j, 0) =</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(params.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * j, 0), center, angle);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            rotated_terminals.block&lt;2, 1&gt;(2 * j, 1) =</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(params.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * j, 1), center, angle);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            rotated_terminals.block&lt;2, 1&gt;(2 * j, 2) =</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(params.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * j, 2), center, angle);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            rotated_vectors.block&lt;2, 1&gt;(2 * j, 0) =</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                     <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(params.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.block&lt;2, 1&gt;(2 * j, 0), origin, angle);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            rotated_vectors.block&lt;2, 1&gt;(2 * j, 1) =</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(params.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.block&lt;2, 1&gt;(2 * j, 1), origin, angle);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            rotated_vectors.block&lt;2, 1&gt;(2 * j, 2) =</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(params.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.block&lt;2, 1&gt;(2 * j, 2), origin, angle);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// Add new parametrization to our vector</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        rotated_data_set.emplace_back(params.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>, Eigen::MatrixXd(params.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>),</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                      rotated_terminals, rotated_vectors);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span> rotated_data_set;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
<div class="ttc" id="anamespaceDataOperations_html_a008bad02f9fea01df05e471448de212d"><div class="ttname"><a href="namespaceDataOperations.html#a008bad02f9fea01df05e471448de212d">DataOperations::generateRotationAngles</a></div><div class="ttdeci">std::vector&lt; double &gt; generateRotationAngles(double rotation_granularity, double random_proportion, std::mt19937 &amp;rng)</div><div class="ttdoc">Generates angles for rotating parametrizations.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:95</div></div>
<div class="ttc" id="anamespaceDataOperations_html_ab08b3135bf6da6012a8c83633d9e4b73"><div class="ttname"><a href="namespaceDataOperations.html#ab08b3135bf6da6012a8c83633d9e4b73">DataOperations::findCenter</a></div><div class="ttdeci">Eigen::Vector2d findCenter(const MeshParametrizationData &amp;params)</div><div class="ttdoc">Finds the geometric centroid of a mesh parametrization.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:139</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8324874abd3386880a853753a310f494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8324874abd3386880a853753a310f494">&#9670;&nbsp;</a></span>rotateParametrization() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> DataOperations::rotateParametrization </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParametrizationEntry.html">ParametrizationEntry</a> &amp;&#160;</td>
          <td class="paramname"><em>param_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::pair&lt; double, double &gt; &amp;&#160;</td>
          <td class="paramname"><em>rotation_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::mt19937 &amp;&#160;</td>
          <td class="paramname"><em>rng</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates rotated variations of a <a class="el" href="structParametrizationEntry.html">ParametrizationEntry</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_entry</td><td>Original parametrization entry </td></tr>
    <tr><td class="paramname">rotation_params</td><td>Pair of (rotation granularity, random proportion) </td></tr>
    <tr><td class="paramname">rng</td><td>Random number generator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Dataset containing rotated variations </dd></dl>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                                                   {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="data__operations_8h.html#a86020b2a5c552ab01e00ec9d0d250f06">ParametrizationDataSet</a> rotated_data_set;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// Initialize angles vector and find the center point of the first parametrization</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    std::vector&lt;double&gt; angles = <a class="code" href="namespaceDataOperations.html#a008bad02f9fea01df05e471448de212d">generateRotationAngles</a>(rotation_params.first, rotation_params.second, rng);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    Eigen::Vector2d center = <a class="code" href="namespaceDataOperations.html#ab08b3135bf6da6012a8c83633d9e4b73">findCenter</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    Eigen::Vector2d origin;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    origin.setZero();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// Iterate through all angles and rotate the param_entry according to that angle</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">double</span> angle : angles) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">// Declare the new matrices for this rotated parametrization</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        Eigen::MatrixXd rotated_terminals(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.rows(), param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.cols());</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        Eigen::MatrixXd rotated_vectors(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.rows(), param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.cols());</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        rotated_terminals.setZero();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        rotated_vectors.setZero();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">// Iterate through all branches and rotate each terminal and vector of that branch</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>; ++j) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            rotated_terminals.block&lt;2, 1&gt;(2 * j, 0) =</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * j, 0), center, angle);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            rotated_terminals.block&lt;2, 1&gt;(2 * j, 1) =</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * j, 1), center, angle);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            rotated_terminals.block&lt;2, 1&gt;(2 * j, 2) =</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.block&lt;2, 1&gt;(2 * j, 2), center, angle);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            rotated_vectors.block&lt;2, 1&gt;(2 * j, 0) =</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.block&lt;2, 1&gt;(2 * j, 0), origin, angle);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            rotated_vectors.block&lt;2, 1&gt;(2 * j, 1) =</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.block&lt;2, 1&gt;(2 * j, 1), origin, angle);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            rotated_vectors.block&lt;2, 1&gt;(2 * j, 2) =</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.block&lt;2, 1&gt;(2 * j, 2), origin, angle);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="comment">// Declare the new matrix for the displacement vectors</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        Eigen::MatrixXd rotated_displacements(param_entry.<a class="code" href="structParametrizationEntry.html#a4ed1ea05469f5947c50ca641e49b8e3a">displacements</a>.rows(), param_entry.<a class="code" href="structParametrizationEntry.html#a4ed1ea05469f5947c50ca641e49b8e3a">displacements</a>.cols());</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        rotated_displacements.setZero();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">// Iterate through the displacement vectors and rotate them</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>; ++i) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; param_entry.<a class="code" href="structParametrizationEntry.html#a4ed1ea05469f5947c50ca641e49b8e3a">displacements</a>.cols(); ++j) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                rotated_displacements.block&lt;2, 1&gt;(4 * i, j) =</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a4ed1ea05469f5947c50ca641e49b8e3a">displacements</a>.block&lt;2, 1&gt;(4 * i, j), origin, angle);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                rotated_displacements.block&lt;2, 1&gt;(4 * i + 2, j) =</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    <a class="code" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af">rotatePoint</a>(param_entry.<a class="code" href="structParametrizationEntry.html#a4ed1ea05469f5947c50ca641e49b8e3a">displacements</a>.block&lt;2, 1&gt;(4 * i + 2, j), origin, angle);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">// Add new parametrization to our vector</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="structMeshParametrizationData.html">MeshParametrizationData</a> new_param {param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>, Eigen::MatrixXd(param_entry.<a class="code" href="structParametrizationEntry.html#a793247066495ce73c374ea9890cbe273">param</a>.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>),</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                            rotated_terminals, rotated_vectors};</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        rotated_data_set.emplace_back(param_entry.<a class="code" href="structParametrizationEntry.html#a96d7469f6124ff71dc42faabdf6f71e0">numBranches</a>, std::move(new_param),</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                      std::move(rotated_displacements), param_entry.<a class="code" href="structParametrizationEntry.html#a4b065ed9f6d4625ab397fc710f5adadb">energyDifference</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">return</span> rotated_data_set;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a27523c442a94bea27ec8411e1e1499af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27523c442a94bea27ec8411e1e1499af">&#9670;&nbsp;</a></span>rotatePoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Vector2d DataOperations::rotatePoint </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>reference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>angle_degrees</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rotates a 2D point around a reference point *. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">point</td><td>Point to rotate </td></tr>
    <tr><td class="paramname">reference</td><td>Center of rotation </td></tr>
    <tr><td class="paramname">angle_degrees</td><td>Rotation angle in degrees </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Rotated point </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespaceDataOperations.html#ac83786aa2f7e93613972c7fb0a171970" title="Generates rotated variations of a MeshParametrizationData object.">rotateParametrization</a> variations for use of <a class="el" href="namespaceDataOperations.html#a27523c442a94bea27ec8411e1e1499af" title="Rotates a 2D point around a reference point *.">rotatePoint</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                                                                                                          {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Translate point so that reference point is at origin</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    Eigen::Vector2d translated = point - reference;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// Rotate the point around the origin</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">double</span> cos_theta = std::cos(angle_degrees * M_PI / 180.0);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordtype">double</span> sin_theta = std::sin(angle_degrees * M_PI / 180.0);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    Eigen::Matrix2d rotation_matrix;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    rotation_matrix &lt;&lt; cos_theta, -sin_theta,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            sin_theta,  cos_theta;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    Eigen::Vector2d rotated = rotation_matrix * translated;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// Translate point back to original reference</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> rotated + reference;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a85bfa90798984f1b432045392252da6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85bfa90798984f1b432045392252da6f">&#9670;&nbsp;</a></span>sampleWithoutReplacement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; int &gt; DataOperations::sampleWithoutReplacement </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::mt19937 &amp;&#160;</td>
          <td class="paramname"><em>rng</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Samples n unique integers from [min, max] without replacement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">min</td><td>Minimum value (inclusive) </td></tr>
    <tr><td class="paramname">max</td><td>Maximum value (inclusive) </td></tr>
    <tr><td class="paramname">n</td><td>Number of samples to draw </td></tr>
    <tr><td class="paramname">rng</td><td>Random number generator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of n unique integers </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">LFException</td><td>if n &gt; (max - min + 1) or max &gt; min </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                                                                                                {</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordtype">int</span> range_size = max - min + 1;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    LF_ASSERT_MSG(max &gt; min, <span class="stringliteral">&quot;Incorrect parameters sent to sampleWithoutReplacement, max less than min&quot;</span>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    LF_ASSERT_MSG(n &lt;= range_size, <span class="stringliteral">&quot;Incorrect parameters sent to sampleWihtoutReplacement, n greater than range&quot;</span>);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// Initialize the vector of potential numbers to sample from</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    std::vector&lt;int&gt; population(range_size);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    std::iota(population.begin(), population.end(), min);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// Initialize and fill our vector with the samples in the population vector</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    std::vector&lt;int&gt; sample(n);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    std::sample(population.begin(), population.end(), sample.begin(), n, rng);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">return</span> sample;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8bbd993d86cb3d3360aaf707ad75a881"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bbd993d86cb3d3360aaf707ad75a881">&#9670;&nbsp;</a></span>saveDataSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DataOperations::saveDataSet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="data__operations_8h.html#a6a3a07638e11f8b744844f1933ff0f0c">DataSet</a> &amp;&#160;</td>
          <td class="paramname"><em>data_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>file_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves a dataset of either type to a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data_set</td><td>Dataset to save </td></tr>
    <tr><td class="paramname">file_name</td><td>Output file path (automatically loads the data from the data folder of the repo, no .bin extension needed) </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                                                                    {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="comment">// Find the path to where we want to save the data set</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    std::filesystem::path project_root = std::filesystem::current_path().parent_path();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    std::filesystem::path data_dir = project_root / <span class="stringliteral">&quot;data&quot;</span>;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    std::filesystem::path full_path = data_dir / (file_name + <span class="stringliteral">&quot;.bin&quot;</span>);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="comment">// Declare the file</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    std::ofstream file(full_path, std::ios::binary);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">if</span> (!file) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Unable to open file for writing within saveDataSet: &quot;</span> + file_name);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">// Find the type of this dataset and write it to the file</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="data__operations_8h.html#af2c97594368140448d6073600d580966">DataSetType</a> type = std::holds_alternative&lt;ParametrizationDataSet&gt;(data_set) ?</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <a class="code" href="data__operations_8h.html#af2c97594368140448d6073600d580966a5b4c98f468897576d1de2cd5ec208689">DataSetType::Parametrization</a> : <a class="code" href="data__operations_8h.html#af2c97594368140448d6073600d580966a2a3cd5946cfd317eb99c3d32e35e2d4c">DataSetType::Point</a>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;type), <span class="keyword">sizeof</span>(<a class="code" href="data__operations_8h.html#af2c97594368140448d6073600d580966">DataSetType</a>));</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="comment">// Check which type this data set holds in order to see how to save the data set</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">if</span> (std::holds_alternative&lt;ParametrizationDataSet&gt;(data_set)) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="comment">// Write the size of the data set at the beginning of the file</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;param_data_set = std::get&lt;ParametrizationDataSet&gt;(data_set);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordtype">size_t</span> size = param_data_set.size();</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;size), <span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>));</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="comment">// Iterate through each entry and save it</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : param_data_set) {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;entry.numBranches), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <a class="code" href="namespaceDataOperations.html#a9374405c98c83ee87c23302191aaa3ed">saveMeshParametrizationData</a>(file, entry.param);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(entry.displacements.data()), entry.displacements.size() * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;entry.energyDifference), <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(entry.tags.data()), <a class="code" href="data__operations_8h.html#a124dab2ed7941f6ea9293d26064a0e39">NUM_TAGS</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="comment">// Write the size of the data set at the beginning of the file</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;point_data_set = std::get&lt;PointDataSet&gt;(data_set);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordtype">size_t</span> size = point_data_set.size();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;size), <span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>));</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="comment">// Iterate through each entry and save it</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;entry : point_data_set) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;entry.numBranches), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <a class="code" href="namespaceDataOperations.html#a1aa1d02bbafe5dac9ae6d2bc10cb6e0b">saveParametrizationPoints</a>(file, entry.points);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="comment">// Calculate number of values used in the displacement matrix</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <span class="keywordtype">int</span> num_displacements = entry.numBranches == 1 ? 8 : 4 * entry.numBranches;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(entry.displacements.data()), num_displacements * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;entry.energyDifference), <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(entry.tags.data()), <a class="code" href="data__operations_8h.html#a124dab2ed7941f6ea9293d26064a0e39">NUM_TAGS</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div>
<div class="ttc" id="adata__operations_8h_html_af2c97594368140448d6073600d580966a2a3cd5946cfd317eb99c3d32e35e2d4c"><div class="ttname"><a href="data__operations_8h.html#af2c97594368140448d6073600d580966a2a3cd5946cfd317eb99c3d32e35e2d4c">DataSetType::Point</a></div><div class="ttdeci">@ Point</div><div class="ttdoc">Dataset contains entries of type PointEntry.</div></div>
<div class="ttc" id="anamespaceDataOperations_html_a1aa1d02bbafe5dac9ae6d2bc10cb6e0b"><div class="ttname"><a href="namespaceDataOperations.html#a1aa1d02bbafe5dac9ae6d2bc10cb6e0b">DataOperations::saveParametrizationPoints</a></div><div class="ttdeci">void saveParametrizationPoints(std::ofstream &amp;file, const ParametrizationPoints &amp;points)</div><div class="ttdoc">Saves a ParametrizationPoints object to a binary file.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:930</div></div>
<div class="ttc" id="anamespaceDataOperations_html_a9374405c98c83ee87c23302191aaa3ed"><div class="ttname"><a href="namespaceDataOperations.html#a9374405c98c83ee87c23302191aaa3ed">DataOperations::saveMeshParametrizationData</a></div><div class="ttdeci">void saveMeshParametrizationData(std::ofstream &amp;file, const MeshParametrizationData &amp;param)</div><div class="ttdoc">Saves a MeshParametrizationData object to a binary file.</div><div class="ttdef"><b>Definition:</b> data_operations.cc:896</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9374405c98c83ee87c23302191aaa3ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9374405c98c83ee87c23302191aaa3ed">&#9670;&nbsp;</a></span>saveMeshParametrizationData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DataOperations::saveMeshParametrizationData </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> &amp;&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves a <a class="el" href="structMeshParametrizationData.html">MeshParametrizationData</a> object to a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>Output file stream </td></tr>
    <tr><td class="paramname">param</td><td>Mesh parametrization to save </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                                                                                                        {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a>), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="comment">// Save widths, current shape is numBranches</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(param.<a class="code" href="structMeshParametrizationData.html#adc3fe2ea07198c41c220ac5fc42f0117">widths</a>.data()), 3 * param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="comment">// Save terminals, current shape will be (2 * numBranches) by 3</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(param.<a class="code" href="structMeshParametrizationData.html#a6757fe1055d22523c940926dfe594bd8">terminals</a>.data()), 6 * param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="comment">// Save vectors, current shape will be (2 * numBranches) by 3</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(param.<a class="code" href="structMeshParametrizationData.html#a4e3e56c925463080a2a16eafecd61158">vectors</a>.data()), 6 * param.<a class="code" href="structMeshParametrizationData.html#adda268017d91178d76eccae27c55ab01">numBranches</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1aa1d02bbafe5dac9ae6d2bc10cb6e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aa1d02bbafe5dac9ae6d2bc10cb6e0b">&#9670;&nbsp;</a></span>saveParametrizationPoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DataOperations::saveParametrizationPoints </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> &amp;&#160;</td>
          <td class="paramname"><em>points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves a <a class="el" href="structParametrizationPoints.html">ParametrizationPoints</a> object to a binary file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>Output file stream </td></tr>
    <tr><td class="paramname">points</td><td>Parametrization points to save </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                                                                                                     {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(&amp;points.<a class="code" href="structParametrizationPoints.html#a06e8568d929def54095413eb2d60a047">numBranches</a>), <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">// Save points, current shape is (4 * numBranches) by 3</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    file.write(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(points.<a class="code" href="structParametrizationPoints.html#a5340e2d38f3582281e5a546cbfbb74e6">points</a>.data()), 12 * points.<a class="code" href="structParametrizationPoints.html#a06e8568d929def54095413eb2d60a047">numBranches</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;}</div>
<div class="ttc" id="astructParametrizationPoints_html_a5340e2d38f3582281e5a546cbfbb74e6"><div class="ttname"><a href="structParametrizationPoints.html#a5340e2d38f3582281e5a546cbfbb74e6">ParametrizationPoints::points</a></div><div class="ttdeci">Eigen::MatrixXd points</div><div class="ttdoc">Matrix containing the locally-ordered point data.</div><div class="ttdef"><b>Definition:</b> data_operations.h:89</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a804a039949519937d4e204b181bb3109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a804a039949519937d4e204b181bb3109">&#9670;&nbsp;</a></span>singleBranchDisplacements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::MatrixXd DataOperations::singleBranchDisplacements </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDisplacementGenerators.html">DisplacementGenerators</a> &amp;&#160;</td>
          <td class="paramname"><em>param_gens</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates displacement boundary conditions for a single branch parametrization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_gens</td><td>Displacement generation parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Matrix of displacement vectors </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structDisplacementGenerators.html" title="Random number generators for multi-branch displacement BCs.">DisplacementGenerators</a> for parameters used </dd></dl>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                                                                          {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// Declare matrix that will hold our displacement vectors</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    Eigen::MatrixXd displacements(4, 2);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    displacements.setZero();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// Iterate through the 4 corners of this branch and generate displacement vectors</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="comment">// Add a displacement boundary condition with probability displaceProbability for each coordinate</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> (param_gens.<a class="code" href="structDisplacementGenerators.html#a9d922eb8173904416ab6ee26b8d86fcc">uniformPerturb</a>(param_gens.<a class="code" href="structDisplacementGenerators.html#a0566b22f25ff3d937ae1e09a41b21ac2">rng</a>) &lt; param_gens.<a class="code" href="structDisplacementGenerators.html#a1d053a9009704d870b70631bf9d329e4">displacementProbability</a>) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            displacements((i % 2) * 2, i / 2) = param_gens.<a class="code" href="structDisplacementGenerators.html#a305b53ae818b9979643c6bc9b1258c3f">displacementPerturb</a>(param_gens.<a class="code" href="structDisplacementGenerators.html#a0566b22f25ff3d937ae1e09a41b21ac2">rng</a>)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    * param_gens.<a class="code" href="structDisplacementGenerators.html#aacb7db94bf3bcf9a1b9c60aba4b8005e">maxDistances</a>[0];</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">if</span> (param_gens.<a class="code" href="structDisplacementGenerators.html#a9d922eb8173904416ab6ee26b8d86fcc">uniformPerturb</a>(param_gens.<a class="code" href="structDisplacementGenerators.html#a0566b22f25ff3d937ae1e09a41b21ac2">rng</a>) &lt; param_gens.<a class="code" href="structDisplacementGenerators.html#a1d053a9009704d870b70631bf9d329e4">displacementProbability</a>) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            displacements((i % 2) * 2 + 1, i / 2) = param_gens.<a class="code" href="structDisplacementGenerators.html#a305b53ae818b9979643c6bc9b1258c3f">displacementPerturb</a>(param_gens.<a class="code" href="structDisplacementGenerators.html#a0566b22f25ff3d937ae1e09a41b21ac2">rng</a>)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    * param_gens.<a class="code" href="structDisplacementGenerators.html#aacb7db94bf3bcf9a1b9c60aba4b8005e">maxDistances</a>[0];</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span> displacements;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
